(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19608,e=>{"use strict";var a=e.i(43476),s=e.i(71645),l=e.i(27341),r=e.i(66027),t=e.i(89464),o=e.i(1851),n=e.i(64211),i=e.i(47627),d=e.i(67881),c=e.i(7233),m=e.i(55436),x=e.i(15788),u=e.i(30374),h=e.i(53145),j=e.i(94814),p=e.i(54616),g=e.i(12598),b=e.i(31278),N=e.i(27612),v=e.i(74946),f=e.i(23750),C=e.i(62870),y=e.i(84762),_=e.i(43531),T=e.i(44523),S=e.i(47163),F=e.i(53751),w=e.i(59377),D=e.i(5151);let I=null;function O({value:e,onChange:l,disabled:r}){let[t,o]=s.useState(!1),[n,i]=s.useState(""),[c,m]=s.useState(!1),[x,u]=s.useState(I||[]),h=async e=>{if(o(e),e){if(I)return void u(I);m(!0);try{let{data:e}=await D.catApi.getProductos({pageSize:1e4});I=e||[],u(I)}catch(e){console.error("Error cargando productos:",e)}finally{m(!1)}}},j=s.useMemo(()=>{if(!n)return x.slice(0,300);let e=n.toLowerCase();return x.filter(a=>a.nombre_completo?.toLowerCase().includes(e)||a.id_sku?.toLowerCase().includes(e)).slice(0,300)},[x,n]),p=x.find(a=>a.id_sku===e);return(0,a.jsxs)(w.Popover,{open:t,onOpenChange:h,children:[(0,a.jsx)(w.PopoverTrigger,{asChild:!0,children:(0,a.jsxs)(d.Button,{variant:"outline",role:"combobox","aria-expanded":t,disabled:r,className:(0,S.cn)("w-full justify-between pl-3 text-left font-normal",!e&&"text-muted-foreground",e&&"font-medium text-foreground border-primary/50"),children:[(0,a.jsx)("span",{className:"truncate",children:p?p.nombre_completo:"Buscar SKU o nombre..."}),(0,a.jsx)(T.ChevronsUpDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,a.jsx)(w.PopoverContent,{className:"w-[420px] p-0",align:"start",children:(0,a.jsxs)(F.Command,{shouldFilter:!1,children:[(0,a.jsx)(F.CommandInput,{placeholder:"Buscar SKU o nombre...",value:n,onValueChange:i}),(0,a.jsxs)(F.CommandList,{className:"max-h-[300px] overflow-y-auto overflow-x-hidden",children:[c&&(0,a.jsxs)("div",{className:"flex items-center justify-center py-6 gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(b.Loader2,{className:"h-4 w-4 animate-spin"}),"Cargando catálogo..."]}),!c&&0===j.length&&n&&(0,a.jsxs)(F.CommandEmpty,{children:['No se encontraron productos para "',n,'".']}),!c&&0===j.length&&!n&&0===x.length&&(0,a.jsx)(F.CommandEmpty,{children:"No hay productos en el catálogo."}),(0,a.jsx)(F.CommandGroup,{children:!c&&j.map(s=>(0,a.jsxs)(F.CommandItem,{value:s.id_sku,onSelect:()=>{l(s.id_sku,s),o(!1),i("")},className:(0,S.cn)("cursor-pointer",e===s.id_sku&&"bg-primary/20 font-bold"),children:[(0,a.jsx)(_.Check,{className:(0,S.cn)("mr-2 h-4 w-4 text-primary shrink-0",e===s.id_sku?"opacity-100":"opacity-0")}),(0,a.jsxs)("div",{className:"flex flex-col w-full min-w-0",children:[(0,a.jsx)("span",{className:"font-medium truncate",children:s.nombre_completo}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-0.5",children:[(0,a.jsxs)("span",{children:["SKU: ",s.id_sku]}),(0,a.jsxs)("span",{className:(0,S.cn)("font-medium",Number(s.stock_actual)>0?"text-green-600":"text-red-500"),children:["Stock: ",Number(s.stock_actual).toLocaleString()]})]})]})]},s.id_sku))})]})]})})]})}var k=e.i(81307);k.z.object({id_movimiento:k.z.string().optional(),fecha_hora:k.z.string().optional(),tipo_movimiento:k.z.enum(["COMPRA","VENTA","PRODUCCION","AJUSTE","RETORNO"]),id_sku:k.z.string().min(1,"SKU es requerido"),cantidad:k.z.coerce.number().refine(e=>0!==e,"Cantidad no puede ser 0"),id_almacen:k.z.string().default("PRINCIPAL"),moneda_origen:k.z.string().optional(),costo_unit_doc:k.z.coerce.number().optional(),tipo_cambio:k.z.coerce.number().optional(),comentarios:k.z.string().optional()});let z=k.z.object({id_sku:k.z.string().min(1,"SKU es requerido"),cantidad:k.z.coerce.number().positive("Cantidad debe ser mayor a 0"),costo_unitario:k.z.coerce.number().min(0,"Costo no puede ser negativo"),descuento:k.z.coerce.number().min(0).optional().default(0),total_linea:k.z.coerce.number().optional(),producto:k.z.any().optional()}),A=k.z.object({id_proveedor:k.z.string().optional(),tipo_entrada:k.z.enum(["COMPRA","AJUSTE_POSITIVO","DEVOLUCION_CLIENTE"]),fecha_registro:k.z.date().optional(),nro_documento_fisico:k.z.string().optional(),moneda:k.z.enum(["PEN","USD"]),tipo_cambio:k.z.coerce.number().positive("Tipo de cambio inválido"),comentarios:k.z.string().optional(),estado:k.z.enum(["INGRESADO","ANULADO"]).default("INGRESADO"),detalles:k.z.array(z).min(1,"Debe agregar al menos un item")}).superRefine((e,a)=>{"COMPRA"!==e.tipo_entrada||e.id_proveedor||a.addIssue({code:k.z.ZodIssueCode.custom,message:"Proveedor es requerido para Compras",path:["id_proveedor"]})}),E=k.z.object({id_sku:k.z.string().min(1,"SKU es requerido"),cantidad:k.z.coerce.number().positive("Cantidad debe ser mayor a 0"),precio_unitario:k.z.coerce.number().min(0),subtotal:k.z.coerce.number().optional(),producto:k.z.any().optional()}),R=k.z.object({tipo_salida:k.z.enum(["VENTA","PRODUCCION","AJUSTE_NEGATIVO","DEVOLUCION_PROVEEDOR"]),id_cliente:k.z.string().optional(),fecha:k.z.date().optional(),comentario:k.z.string().optional(),estado:k.z.enum(["CONFIRMADO","ANULADO"]).default("CONFIRMADO"),detalles:k.z.array(E).min(1,"Debe agregar al menos un item")}).superRefine((e,a)=>{"VENTA"!==e.tipo_salida||e.id_cliente||a.addIssue({code:k.z.ZodIssueCode.custom,message:"Cliente es requerido para Ventas",path:["id_cliente"]})});var P=e.i(69625);function M({onSuccess:e}){let s=(0,g.useQueryClient)(),{data:l}=(0,r.useQuery)({queryKey:["mstProveedores"],queryFn:()=>P.mstApi.getProveedores()}),n=(0,h.useForm)({resolver:(0,j.zodResolver)(A),defaultValues:{tipo_entrada:"COMPRA",moneda:"PEN",tipo_cambio:1,estado:"INGRESADO",nro_documento_fisico:"",comentarios:"",detalles:[]}}),{fields:m,append:x,remove:u}=(0,h.useFieldArray)({control:n.control,name:"detalles"}),_=n.watch("detalles"),T=_?.reduce((e,a)=>{let s=Number(a.cantidad)*Number(a.costo_unitario)-(Number(a.descuento)||0);return e+(isNaN(s)?0:s)},0)||0,S=(0,p.useMutation)({mutationFn:t.trxApi.createEntrada,onSuccess:()=>{s.invalidateQueries({queryKey:["trxMovimientos"]}),s.invalidateQueries({queryKey:["trxEntradas"]}),alert("¡Entrada registrada correctamente!"),n.reset(),e?.()},onError:e=>{console.error(e),alert("Error al registrar entrada: "+e.message)}});return(0,a.jsx)(v.Form,{...n,children:(0,a.jsxs)("form",{onSubmit:n.handleSubmit(function(e){0===e.detalles.length?alert("Debe agregar al menos un producto"):S.mutate(e)}),className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(v.FormField,{control:n.control,name:"tipo_entrada",render:({field:e})=>(0,a.jsxs)(v.FormItem,{className:"col-span-1",children:[(0,a.jsx)(v.FormLabel,{children:"Tipo Entrada"}),(0,a.jsxs)(C.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(C.SelectTrigger,{children:(0,a.jsx)(C.SelectValue,{placeholder:"Tipo"})})}),(0,a.jsxs)(C.SelectContent,{children:[(0,a.jsx)(C.SelectItem,{value:"COMPRA",children:"Compra"}),(0,a.jsx)(C.SelectItem,{value:"AJUSTE_POSITIVO",children:"Ajuste (+)"}),(0,a.jsx)(C.SelectItem,{value:"DEVOLUCION_CLIENTE",children:"Devolución Cliente"})]})]}),(0,a.jsx)(v.FormMessage,{})]})}),"COMPRA"===n.watch("tipo_entrada")&&(0,a.jsx)(v.FormField,{control:n.control,name:"id_proveedor",render:({field:e})=>(0,a.jsxs)(v.FormItem,{className:"col-span-1",children:[(0,a.jsx)(v.FormLabel,{children:"Proveedor"}),(0,a.jsxs)(C.Select,{onValueChange:e.onChange,defaultValue:e.value||"",children:[(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(C.SelectTrigger,{children:(0,a.jsx)(C.SelectValue,{placeholder:"Seleccionar proveedor"})})}),(0,a.jsx)(C.SelectContent,{children:l?.map(e=>(0,a.jsxs)(C.SelectItem,{value:e.id_proveedor,children:[e.razon_social," (",e.ruc,")"]},e.id_proveedor))})]}),(0,a.jsx)(v.FormMessage,{})]})}),(0,a.jsx)(v.FormField,{control:n.control,name:"nro_documento_fisico",render:({field:e})=>(0,a.jsxs)(v.FormItem,{className:"COMPRA"!==n.watch("tipo_entrada")?"col-span-2":"col-span-1",children:[(0,a.jsx)(v.FormLabel,{children:"Ref. / Documento"}),(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(f.Input,{placeholder:"F001-123, OP-001...",...e})}),(0,a.jsx)(v.FormMessage,{})]})}),(0,a.jsx)(v.FormField,{control:n.control,name:"fecha_registro",render:({field:e})=>(0,a.jsxs)(v.FormItem,{children:[(0,a.jsx)(v.FormLabel,{children:"Fecha Emisión"}),(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(f.Input,{type:"date",onChange:a=>e.onChange(new Date(a.target.value)),value:e.value?(0,o.format)(e.value,"yyyy-MM-dd"):""})}),(0,a.jsx)(v.FormMessage,{})]})}),(0,a.jsx)(v.FormField,{control:n.control,name:"moneda",render:({field:e})=>(0,a.jsxs)(v.FormItem,{children:[(0,a.jsx)(v.FormLabel,{children:"Moneda Doc."}),(0,a.jsxs)(C.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(C.SelectTrigger,{children:(0,a.jsx)(C.SelectValue,{placeholder:"Moneda"})})}),(0,a.jsxs)(C.SelectContent,{children:[(0,a.jsx)(C.SelectItem,{value:"PEN",children:"Soles (S/)"}),(0,a.jsx)(C.SelectItem,{value:"USD",children:"Dólares ($)"})]})]}),(0,a.jsx)(v.FormMessage,{})]})}),"PEN"!==n.watch("moneda")&&(0,a.jsx)(v.FormField,{control:n.control,name:"tipo_cambio",render:({field:e})=>(0,a.jsxs)(v.FormItem,{children:[(0,a.jsx)(v.FormLabel,{children:"Tipo Cambio"}),(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(f.Input,{type:"number",step:"0.001",...e})}),(0,a.jsx)(v.FormMessage,{})]})}),(0,a.jsx)(v.FormField,{control:n.control,name:"comentarios",render:({field:e})=>(0,a.jsxs)(v.FormItem,{className:"col-span-2",children:[(0,a.jsx)(v.FormLabel,{children:"Comentarios"}),(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(y.Textarea,{placeholder:"Observaciones de la recepción...",...e})}),(0,a.jsx)(v.FormMessage,{})]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Items de Compra"}),(0,a.jsxs)(d.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>x({id_sku:"",cantidad:1,costo_unitario:0,descuento:0}),children:[(0,a.jsx)(c.Plus,{className:"mr-2 h-4 w-4"}),"Agregar Item"]})]}),(0,a.jsx)("div",{className:"border rounded-md",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{className:"w-[300px]",children:"Producto (SKU)"}),(0,a.jsx)(i.TableHead,{className:"w-[100px]",children:"Cantidad"}),(0,a.jsx)(i.TableHead,{className:"w-[120px]",children:"Costo Unit."}),(0,a.jsx)(i.TableHead,{className:"w-[100px]",children:"Desc."}),(0,a.jsx)(i.TableHead,{className:"w-[120px] text-right",children:"Total Linea"}),(0,a.jsx)(i.TableHead,{className:"w-[50px]"})]})}),(0,a.jsxs)(i.TableBody,{children:[m.map((e,s)=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(v.FormField,{control:n.control,name:`detalles.${s}.id_sku`,render:({field:e})=>(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(O,{value:e.value,onChange:(a,l)=>{if(e.onChange(a),l){let e=l.costo_estandar||0;n.setValue(`detalles.${s}.costo_unitario`,e)}}})})})}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(v.FormField,{control:n.control,name:`detalles.${s}.cantidad`,render:({field:e})=>(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(f.Input,{type:"number",step:"0.01",...e})})})}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(v.FormField,{control:n.control,name:`detalles.${s}.costo_unitario`,render:({field:e})=>(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(f.Input,{type:"number",step:"0.01",...e})})})}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(v.FormField,{control:n.control,name:`detalles.${s}.descuento`,render:({field:e})=>(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(f.Input,{type:"number",step:"0.01",...e})})})}),(0,a.jsx)(i.TableCell,{className:"text-right font-medium",children:((n.watch(`detalles.${s}.cantidad`)||0)*(n.watch(`detalles.${s}.costo_unitario`)||0)).toFixed(2)}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(d.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>u(s),children:(0,a.jsx)(N.Trash2,{className:"h-4 w-4 text-red-500"})})})]},e.id)),0===m.length&&(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:6,className:"text-center h-24 text-muted-foreground",children:"No hay items en la orden de compra."})})]})]})}),(0,a.jsxs)("div",{className:"flex justify-end items-center gap-4 p-4 bg-muted/20 rounded-lg",children:[(0,a.jsx)("span",{className:"text-lg font-bold",children:"Total Documento:"}),(0,a.jsx)("span",{className:"text-2xl font-bold",children:T.toFixed(2)})]})]}),(0,a.jsx)("div",{className:"flex justify-end gap-2",children:(0,a.jsxs)(d.Button,{type:"submit",disabled:S.isPending,size:"lg",children:[S.isPending&&(0,a.jsx)(b.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Registrar Entrada (Kardex)"]})})]})})}function V({id:e,open:s,onOpenChange:l,headerInfo:n}){let{data:d,isLoading:c}=(0,r.useQuery)({queryKey:["trxEntradaDetalle",e],queryFn:()=>t.trxApi.getEntradaDetalles(e),enabled:!!e&&s});return(0,a.jsx)(u.Dialog,{open:s,onOpenChange:l,children:(0,a.jsxs)(u.DialogContent,{className:"sm:max-w-[80vw] max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(u.DialogHeader,{children:[(0,a.jsx)(u.DialogTitle,{children:"Detalle de Entrada (Compra)"}),(0,a.jsxs)(u.DialogDescription,{children:["ID: ",n?.id_entrada?.slice(0,8),"... | Doc: ",n?.nro_documento_fisico]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 py-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Fecha Registro:"}),(0,a.jsx)("div",{className:"font-medium",children:n?.fecha_registro?(0,o.format)(new Date(n.fecha_registro),"dd/MM/yyyy HH:mm"):"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Proveedor:"}),(0,a.jsx)("div",{className:"font-medium",children:n?.mst_proveedores?.razon_social||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Moneda:"}),(0,a.jsxs)("div",{className:"font-medium",children:[n?.moneda," (TC: ",n?.tipo_cambio,")"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Estado:"}),(0,a.jsx)("div",{className:"font-medium",children:n?.estado})]}),(0,a.jsxs)("div",{className:"col-span-4",children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Comentarios:"}),(0,a.jsx)("div",{children:n?.comentarios||"-"})]})]}),(0,a.jsx)("div",{className:"border rounded-md",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"Producto"}),(0,a.jsx)(i.TableHead,{children:"Cod. Prov"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Cantidad"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Costo Unit."}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Total Linea"})]})}),(0,a.jsx)(i.TableBody,{children:c?(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:5,className:"text-center py-4",children:(0,a.jsx)(b.Loader2,{className:"h-6 w-6 animate-spin mx-auto"})})}):d?.length===0?(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:5,className:"text-center py-4 text-muted-foreground",children:"No hay items registrados."})}):d?.map(e=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsxs)(i.TableCell,{children:[(0,a.jsx)("div",{className:"font-medium",children:e.cat_productos_variantes?.nombre_completo}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.cat_productos_variantes?.unidad_medida})]}),(0,a.jsx)(i.TableCell,{children:e.cat_productos_variantes?.cod_proveedor||"-"}),(0,a.jsx)(i.TableCell,{className:"text-right",children:Number(e.cantidad).toFixed(2)}),(0,a.jsx)(i.TableCell,{className:"text-right",children:e.costo_unitario?.toFixed(2)}),(0,a.jsx)(i.TableCell,{className:"text-right font-medium",children:e.total_linea?.toFixed(2)})]},e.id_linea_entrada))})]})})]})})}var H=e.i(94179);function L({active:e}){let[l,h]=(0,s.useState)(""),[j,p]=(0,s.useState)({key:"fecha_registro",direction:"desc"}),{data:g,isLoading:b}=(0,r.useQuery)({queryKey:["trxEntradas",l],queryFn:()=>t.trxApi.getEntradas({search:l}),enabled:e}),[N,v]=(0,s.useState)(!1),[C,y]=(0,s.useState)(null),_=e=>{let a="asc";j&&j.key===e&&"asc"===j.direction&&(a="desc"),p({key:e,direction:a})},T=s.default.useMemo(()=>{if(!g)return[];let e=[...g];return j&&e.sort((e,a)=>{let s=e[j.key],l=a[j.key];return("proveedor"===j.key&&(s=e.mst_proveedores?.razon_social||"",l=a.mst_proveedores?.razon_social||""),s<l)?"asc"===j.direction?-1:1:s>l?"asc"===j.direction?1:-1:0}),e},[g,j]);return b&&e?(0,a.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"Cargando entradas..."}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4 p-4 border rounded-lg bg-gray-50 dark:bg-gray-900/50 items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Truck,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Registro de Compras (Entradas)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[(0,a.jsxs)("div",{className:"relative w-[250px] bg-white rounded-md",children:[(0,a.jsx)(m.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(f.Input,{placeholder:"Buscar proveedor, documento...",className:"pl-8 bg-transparent",value:l,onChange:e=>h(e.target.value)})]}),(0,a.jsxs)(u.Dialog,{open:N,onOpenChange:v,children:[(0,a.jsx)(u.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(d.Button,{children:[(0,a.jsx)(c.Plus,{className:"mr-2 h-4 w-4"}),"Nueva Entrada"]})}),(0,a.jsxs)(u.DialogContent,{className:"sm:max-w-[900px] max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(u.DialogHeader,{children:[(0,a.jsx)(u.DialogTitle,{children:"Registrar Entrada de Mercadería"}),(0,a.jsx)(u.DialogDescription,{children:"Ingrese los detalles de la factura de compra o guía de remisión."})]}),(0,a.jsx)(M,{onSuccess:()=>v(!1)})]})]})]})]}),(0,a.jsx)(V,{open:!!C,headerInfo:C,onOpenChange:e=>!e&&y(null),id:C?.id_entrada}),(0,a.jsx)("div",{className:"border rounded-md bg-white dark:bg-gray-800",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsxs)(i.TableHead,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>_("fecha_registro"),children:["Fecha ",j?.key==="fecha_registro"&&("asc"===j.direction?"↑":"↓")]}),(0,a.jsxs)(i.TableHead,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>_("tipo_entrada"),children:["Tipo ",j?.key==="tipo_entrada"&&("asc"===j.direction?"↑":"↓")]}),(0,a.jsxs)(i.TableHead,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>_("proveedor"),children:["Proveedor ",j?.key==="proveedor"&&("asc"===j.direction?"↑":"↓")]}),(0,a.jsxs)(i.TableHead,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>_("nro_documento_fisico"),children:["Documento ",j?.key==="nro_documento_fisico"&&("asc"===j.direction?"↑":"↓")]}),(0,a.jsx)(i.TableHead,{children:"Moneda"}),(0,a.jsx)(i.TableHead,{children:"Estado"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,a.jsxs)(i.TableBody,{children:[T?.length===0&&(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:7,className:"text-center h-24 text-muted-foreground",children:"No se encontraron entradas con los filtros actuales."})}),T?.map(e=>(0,a.jsxs)(i.TableRow,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>y(e),children:[(0,a.jsx)(i.TableCell,{children:(0,o.format)(new Date(e.fecha_registro),"dd/MM/yyyy",{locale:n.es})}),(0,a.jsx)(i.TableCell,{children:e.tipo_entrada}),(0,a.jsx)(i.TableCell,{className:"font-medium",children:e.mst_proveedores?.razon_social||"Sin Proveedor"}),(0,a.jsx)(i.TableCell,{children:e.nro_documento_fisico||"-"}),(0,a.jsx)(i.TableCell,{children:e.moneda}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(H.Badge,{variant:"INGRESADO"===e.estado?"default":"BORRADOR"===e.estado?"outline":"secondary",className:"INGRESADO"===e.estado?"bg-green-100 text-green-800 hover:bg-green-200 border-green-200":"",children:e.estado})}),(0,a.jsx)(i.TableCell,{className:"text-right",children:(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),y(e)},children:"Ver Detalle"})})]},e.id_entrada))]})]})})]})}var U=e.i(92270),B=e.i(25959);function q({onSuccess:e}){let l=(0,g.useQueryClient)(),{data:n}=(0,r.useQuery)({queryKey:["mstClientes"],queryFn:()=>P.mstApi.getClientes()}),m=(0,h.useForm)({resolver:(0,j.zodResolver)(R),defaultValues:{tipo_salida:"VENTA",estado:"CONFIRMADO",detalles:[]}}),[x,u]=s.useState(!1),_=m.watch("tipo_salida"),{fields:T,append:S,remove:F}=(0,h.useFieldArray)({control:m.control,name:"detalles"}),w=m.watch("detalles"),D=w?.reduce((e,a)=>{let s=Number(a.cantidad)*Number(a.precio_unitario);return e+(isNaN(s)?0:s)},0)||0,{data:I}=(0,r.useQuery)({queryKey:["mstConfig"],queryFn:P.mstApi.getConfiguracion});s.useEffect(()=>{let e=m.getValues("detalles");e.length>0&&e.forEach((e,a)=>{if(e.producto){let s=k(e.producto,_);m.setValue(`detalles.${a}.precio_unitario`,s)}})},[x,_,I]);let k=(e,a)=>{if(!e)return 0;let s=Number(e.costo_promedio)||0,l=Number(e.costo_mercado_unit)||0,r=I&&Number(I.margen_ganancia_default)||.3,t=I&&Number(I.igv)||.18;if("VENTA"!==a)return Number(s.toFixed(2));{let e=Math.max(s,l)*(1+r);return x&&(e*=1+t),Number(e.toFixed(2))}},z=(0,p.useMutation)({mutationFn:t.trxApi.createSalida,onSuccess:()=>{l.invalidateQueries({queryKey:["trxMovimientos"]}),l.invalidateQueries({queryKey:["trxSalidas"]}),alert("¡Salida registrada correctamente!"),m.reset(),u(!1),e?.()},onError:e=>{console.error(e),alert("Error al registrar salida: "+e.message)}});return(0,a.jsx)(v.Form,{...m,children:(0,a.jsxs)("form",{onSubmit:m.handleSubmit(function(e){0===e.detalles.length?alert("Debe agregar al menos un item"):z.mutate(e)}),className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(v.FormField,{control:m.control,name:"tipo_salida",render:({field:e})=>(0,a.jsxs)(v.FormItem,{children:[(0,a.jsx)(v.FormLabel,{children:"Tipo de Salida"}),(0,a.jsxs)(C.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(C.SelectTrigger,{children:(0,a.jsx)(C.SelectValue,{placeholder:"Seleccionar tipo"})})}),(0,a.jsxs)(C.SelectContent,{children:[(0,a.jsx)(C.SelectItem,{value:"VENTA",children:"Venta Directa"}),(0,a.jsx)(C.SelectItem,{value:"PRODUCCION",children:"Consumo Producción"}),(0,a.jsx)(C.SelectItem,{value:"AJUSTE_NEGATIVO",children:"Ajuste Inventario (-)"}),(0,a.jsx)(C.SelectItem,{value:"DEVOLUCION_PROOVEDOR",children:"Devolución a Prov."})]})]}),(0,a.jsx)(v.FormMessage,{})]})}),"VENTA"===_&&(0,a.jsx)(v.FormField,{control:m.control,name:"id_cliente",render:({field:e})=>(0,a.jsxs)(v.FormItem,{className:"col-span-2",children:[(0,a.jsx)(v.FormLabel,{children:"Cliente"}),(0,a.jsxs)(C.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(C.SelectTrigger,{children:(0,a.jsx)(C.SelectValue,{placeholder:"Seleccionar cliente"})})}),(0,a.jsx)(C.SelectContent,{children:n?.map(e=>(0,a.jsx)(C.SelectItem,{value:e.id_cliente,children:e.nombre_completo},e.id_cliente))})]}),(0,a.jsx)(v.FormMessage,{})]})}),(0,a.jsx)(v.FormField,{control:m.control,name:"fecha",render:({field:e})=>(0,a.jsxs)(v.FormItem,{children:[(0,a.jsx)(v.FormLabel,{children:"Fecha"}),(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(f.Input,{type:"date",onChange:a=>e.onChange(new Date(a.target.value)),value:e.value?(0,o.format)(e.value,"yyyy-MM-dd"):""})}),(0,a.jsx)(v.FormMessage,{})]})}),(0,a.jsx)(v.FormField,{control:m.control,name:"comentario",render:({field:e})=>(0,a.jsxs)(v.FormItem,{className:"col-span-2",children:[(0,a.jsx)(v.FormLabel,{children:"Comentarios / Referencia"}),(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(y.Textarea,{placeholder:"Ej. Para Proyecto X, Merma, etc.",...e})}),(0,a.jsx)(v.FormMessage,{})]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Items de Salida"}),"VENTA"===_&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(B.Checkbox,{id:"igv",checked:x,onCheckedChange:e=>u(e)}),(0,a.jsx)("label",{htmlFor:"igv",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Incluir IGV (18%)"})]}),(0,a.jsxs)(d.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>S({id_sku:"",cantidad:1,precio_unitario:0}),children:[(0,a.jsx)(c.Plus,{className:"mr-2 h-4 w-4"}),"Agregar Item"]})]}),(0,a.jsx)("div",{className:"border rounded-md",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{className:"w-[300px]",children:"Producto (SKU)"}),(0,a.jsx)(i.TableHead,{className:"w-[100px]",children:"Cantidad"}),"VENTA"===_&&(0,a.jsx)(i.TableHead,{className:"w-[120px]",children:"Precio Venta"}),(0,a.jsx)(i.TableHead,{className:"w-[120px] text-right",children:"Subtotal"}),(0,a.jsx)(i.TableHead,{className:"w-[50px]"})]})}),(0,a.jsx)(i.TableBody,{children:T.map((e,s)=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(v.FormField,{control:m.control,name:`detalles.${s}.id_sku`,render:({field:e})=>(0,a.jsxs)(v.FormItem,{className:"flex flex-col",children:[(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(O,{value:e.value,onChange:(a,l)=>{e.onChange(a),m.setValue(`detalles.${s}.producto`,l);let r=k(l,_);m.setValue(`detalles.${s}.precio_unitario`,r)}})}),(0,a.jsx)(v.FormMessage,{})]})})}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(v.FormField,{control:m.control,name:`detalles.${s}.cantidad`,render:({field:e})=>(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(f.Input,{type:"number",step:"0.01",...e})})})}),"VENTA"===_&&(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(v.FormField,{control:m.control,name:`detalles.${s}.precio_unitario`,render:({field:e})=>(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(f.Input,{type:"number",step:"0.01",...e,readOnly:!0,className:"bg-gray-100 text-gray-500 cursor-not-allowed"})})})}),(0,a.jsx)(i.TableCell,{className:"text-right font-medium",children:((m.watch(`detalles.${s}.cantidad`)||0)*(m.watch(`detalles.${s}.precio_unitario`)||0)).toFixed(2)}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(d.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>F(s),children:(0,a.jsx)(N.Trash2,{className:"h-4 w-4 text-red-500"})})})]},e.id))})]})}),"VENTA"===_&&(0,a.jsxs)("div",{className:"flex justify-end items-center gap-4 p-4 bg-muted/20 rounded-lg",children:[(0,a.jsx)("span",{className:"text-lg font-bold",children:"Total Venta:"}),(0,a.jsx)("span",{className:"text-2xl font-bold",children:D.toFixed(2)})]})]}),(0,a.jsx)("div",{className:"flex justify-end gap-2",children:(0,a.jsxs)(d.Button,{type:"submit",disabled:z.isPending,size:"lg",variant:"destructive",children:[z.isPending&&(0,a.jsx)(b.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Registrar Salida"]})})]})})}function K({id:e,open:s,onOpenChange:l,headerInfo:n}){let{data:d,isLoading:c}=(0,r.useQuery)({queryKey:["trxSalidaDetalle",e],queryFn:()=>t.trxApi.getSalidaDetalles(e),enabled:!!e&&s});return(0,a.jsx)(u.Dialog,{open:s,onOpenChange:l,children:(0,a.jsxs)(u.DialogContent,{className:"sm:max-w-[80vw] max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(u.DialogHeader,{children:[(0,a.jsx)(u.DialogTitle,{children:"Detalle de Salida"}),(0,a.jsxs)(u.DialogDescription,{children:["ID: ",n?.id_salida?.slice(0,8),"... | Tipo: ",n?.tipo_salida]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 py-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Fecha:"}),(0,a.jsx)("div",{className:"font-medium",children:n?.fecha?(0,o.format)(new Date(n.fecha),"dd/MM/yyyy HH:mm"):"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Cliente/Destino:"}),(0,a.jsx)("div",{className:"font-medium",children:n?.mst_clientes?.nombre_completo||n?.id_destinatario||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Responsable:"}),(0,a.jsx)("div",{className:"font-medium",children:n?.responsable_interno||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Total:"}),(0,a.jsxs)("div",{className:"font-bold text-lg",children:["S/ ",Number(n?.total_dinero||0).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Comentarios:"}),(0,a.jsx)("div",{children:n?.comentario||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Estado:"}),(0,a.jsx)("div",{children:n?.estado})]})]}),(0,a.jsx)("div",{className:"border rounded-md",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"Producto"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Cantidad"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Precio Unit."}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Subtotal"})]})}),(0,a.jsx)(i.TableBody,{children:c?(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:4,className:"text-center py-4",children:(0,a.jsx)(b.Loader2,{className:"h-6 w-6 animate-spin mx-auto"})})}):d?.length===0?(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:4,className:"text-center py-4 text-muted-foreground",children:"No hay items registrados."})}):d?.map(e=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsxs)(i.TableCell,{children:[(0,a.jsx)("div",{className:"font-medium",children:e.cat_productos_variantes?.nombre_completo}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.cat_productos_variantes?.unidad_medida})]}),(0,a.jsx)(i.TableCell,{className:"text-right",children:Number(e.cantidad).toFixed(2)}),(0,a.jsxs)(i.TableCell,{className:"text-right",children:["S/ ",Number(e.precio_unitario).toFixed(2)]}),(0,a.jsxs)(i.TableCell,{className:"text-right font-medium",children:["S/ ",Number(e.subtotal).toFixed(2)]})]},e.id_linea_salida))})]})})]})})}function $({active:e}){let[l,x]=(0,s.useState)(""),{data:h,isLoading:j}=(0,r.useQuery)({queryKey:["trxSalidas",{search:l}],queryFn:()=>t.trxApi.getSalidas({search:l}),enabled:e}),[p,g]=(0,s.useState)(!1),[b,N]=(0,s.useState)(null);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4 p-4 border rounded-lg bg-gray-50 dark:bg-gray-900/50 items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(U.LogOut,{className:"h-5 w-5 text-red-600"}),(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Registro de Salidas (Ventas/Consumos)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[(0,a.jsxs)("div",{className:"relative w-[250px] bg-white rounded-md",children:[(0,a.jsx)(m.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(f.Input,{placeholder:"Buscar destinatario, tipo...",className:"pl-8 bg-transparent",value:l,onChange:e=>x(e.target.value)})]}),(0,a.jsxs)(u.Dialog,{open:p,onOpenChange:g,children:[(0,a.jsx)(u.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(d.Button,{variant:"destructive",children:[(0,a.jsx)(c.Plus,{className:"mr-2 h-4 w-4"}),"Nueva Salida"]})}),(0,a.jsxs)(u.DialogContent,{className:"sm:max-w-[900px] max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(u.DialogHeader,{children:[(0,a.jsx)(u.DialogTitle,{children:"Registrar Salida de Material"}),(0,a.jsx)(u.DialogDescription,{children:"Ventas, Bajas de Producción o Ajustes negativos."})]}),(0,a.jsx)(q,{onSuccess:()=>g(!1)})]})]})]})]}),(0,a.jsx)(K,{open:!!b,headerInfo:b,onOpenChange:e=>!e&&N(null),id:b?.id_salida}),(0,a.jsx)("div",{className:"border rounded-md bg-white dark:bg-gray-800",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"Fecha"}),(0,a.jsx)(i.TableHead,{children:"Tipo"}),(0,a.jsx)(i.TableHead,{children:"Destinatario"}),(0,a.jsx)(i.TableHead,{children:"Comentario"}),(0,a.jsx)(i.TableHead,{children:"Estado"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,a.jsxs)(i.TableBody,{children:[h?.length===0&&(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:6,className:"text-center h-24 text-muted-foreground",children:"No hay salidas registradas."})}),h?.map(e=>(0,a.jsxs)(i.TableRow,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>N(e),children:[(0,a.jsx)(i.TableCell,{children:(0,o.format)(new Date(e.fecha),"dd/MM/yyyy",{locale:n.es})}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(H.Badge,{variant:"outline",children:e.tipo_salida})}),(0,a.jsx)(i.TableCell,{children:e.mst_clientes?.nombre_completo||e.id_destinatario||"-"}),(0,a.jsx)(i.TableCell,{children:e.comentario}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(H.Badge,{variant:"CONFIRMADO"===e.estado?"default":"BORRADOR"===e.estado?"outline":"secondary",className:"CONFIRMADO"===e.estado?"bg-green-100 text-green-800 hover:bg-green-200 border-green-200":"",children:e.estado})}),(0,a.jsx)(i.TableCell,{className:"text-right",children:(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),N(e)},children:"Ver Detalle"})})]},e.id_salida))]})]})})]})}var Q=e.i(71435);let G=({label:e,value:s,className:l=""})=>(0,a.jsxs)("div",{className:`grid grid-cols-3 gap-4 py-2 border-b last:border-0 ${l}`,children:[(0,a.jsx)("span",{className:"font-medium text-muted-foreground text-xs uppercase tracking-wider",children:e}),(0,a.jsx)("span",{className:"col-span-2 text-sm break-words",children:s||(0,a.jsx)("span",{className:"text-muted-foreground italic",children:"N/A"})})]});function J({open:e,onOpenChange:s,data:l}){return l?(0,a.jsx)(u.Dialog,{open:e,onOpenChange:s,children:(0,a.jsxs)(u.DialogContent,{className:"sm:max-w-[600px] max-h-[90vh] p-0 flex flex-col gap-0",children:[(0,a.jsxs)(u.DialogHeader,{className:"p-6 pb-2",children:[(0,a.jsxs)(u.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"Detalle de Movimiento"}),(0,a.jsx)(H.Badge,{variant:"outline",children:l.tipo_movimiento})]}),(0,a.jsxs)(u.DialogDescription,{children:["ID: ",l.id_movimiento]})]}),(0,a.jsx)(Q.ScrollArea,{className:"flex-1 p-6 pt-0",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-primary",children:"Información General"}),(0,a.jsxs)("div",{className:"bg-muted/30 rounded-lg p-3 border",children:[(0,a.jsx)(G,{label:"Fecha y Hora",value:l.fecha_hora?(0,o.format)(new Date(l.fecha_hora),"dd/MM/yyyy HH:mm:ss",{locale:n.es}):null}),(0,a.jsx)(G,{label:"Tipo Movimiento",value:l.tipo_movimiento}),(0,a.jsx)(G,{label:"Nro. Documento",value:l.nro_documento}),(0,a.jsx)(G,{label:"Referencia Doc.",value:l.referencia_doc})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-primary",children:"Detalle de Producto"}),(0,a.jsxs)("div",{className:"bg-muted/30 rounded-lg p-3 border",children:[(0,a.jsx)(G,{label:"SKU",value:(0,a.jsx)("span",{className:"font-mono text-xs bg-muted px-1 py-0.5 rounded",children:l.id_sku})}),(0,a.jsx)(G,{label:"Producto",value:l.producto_nombre}),(0,a.jsx)(G,{label:"Familia / Marca",value:`${l.nombre_familia||"-"} / ${l.nombre_marca||"-"}`}),(0,a.jsx)(G,{label:"Cantidad",value:(0,a.jsxs)("span",{className:`font-bold ${l.cantidad<0?"text-red-500":"text-green-600"}`,children:[Number(l.cantidad).toFixed(4)," ",l.unidad_medida]})}),(0,a.jsx)(G,{label:"Costo Unitario",value:l.costo_unit_doc?`S/ ${Number(l.costo_unit_doc).toFixed(4)}`:"-"}),(0,a.jsx)(G,{label:"Total PEN",value:l.costo_total_pen?`S/ ${Number(l.costo_total_pen).toFixed(2)}`:"-"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-primary",children:"Entidad y Logística"}),(0,a.jsxs)("div",{className:"bg-muted/30 rounded-lg p-3 border",children:[(0,a.jsx)(G,{label:"Entidad",value:l.entidad_nombre}),(0,a.jsx)(G,{label:"Almacén",value:l.id_almacen}),(0,a.jsx)(G,{label:"Usuario Registro",value:l.usuario_reg}),(0,a.jsx)(G,{label:"Comentarios",value:l.comentarios})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-primary",children:"Datos de Sistema (Raw)"}),(0,a.jsx)("div",{className:"bg-slate-950 text-slate-50 rounded-lg p-3 text-xs font-mono overflow-x-auto whitespace-pre-wrap",children:JSON.stringify(l,null,2)})]})]})})]})}):null}var W=e.i(37727);function X({active:e}){let[l,c]=(0,s.useState)(""),[x,u]=(0,s.useState)("TODOS"),[h,j]=(0,s.useState)({key:"fecha_hora",direction:"desc"}),[p,g]=(0,s.useState)(null),[b,N]=(0,s.useState)(0),[v,y]=(0,s.useState)(100),_={search:l,tipo:"TODOS"===x?void 0:x,limit:v,offset:b*v},{data:T,isLoading:S}=(0,r.useQuery)({queryKey:["trxMovimientos",_],queryFn:()=>t.trxApi.getMovimientos(_),enabled:e}),F=T?.data||[],w=T?.count||0,D=Math.ceil(w/v);s.default.useEffect(()=>{N(0)},[l,x,v]);let I=e=>{let a="asc";h&&h.key===e&&"asc"===h.direction&&(a="desc"),j({key:e,direction:a})},O=s.default.useMemo(()=>{let e=[...F];return h&&e.sort((e,a)=>e[h.key]<a[h.key]?"asc"===h.direction?-1:1:e[h.key]>a[h.key]?"asc"===h.direction?1:-1:0),e},[F,h]);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(J,{open:!!p,onOpenChange:e=>!e&&g(null),data:p}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 p-2 border rounded-lg bg-gray-50 dark:bg-gray-900/50 items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-1 gap-2 items-center",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,a.jsx)(m.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(f.Input,{placeholder:"Buscar por producto...",className:"pl-8 bg-white dark:bg-black h-9 text-sm",value:l,onChange:e=>c(e.target.value)})]}),(0,a.jsx)("div",{className:"w-[150px]",children:(0,a.jsxs)(C.Select,{value:x,onValueChange:u,children:[(0,a.jsx)(C.SelectTrigger,{className:"bg-white dark:bg-black h-9 text-sm",children:(0,a.jsx)(C.SelectValue,{placeholder:"Tipo"})}),(0,a.jsxs)(C.SelectContent,{children:[(0,a.jsx)(C.SelectItem,{value:"TODOS",children:"Todos"}),(0,a.jsx)(C.SelectItem,{value:"COMPRA",children:"Compras"}),(0,a.jsx)(C.SelectItem,{value:"VENTA",children:"Ventas"}),(0,a.jsx)(C.SelectItem,{value:"PRODUCCION",children:"Producción"}),(0,a.jsx)(C.SelectItem,{value:"AJUSTE",children:"Ajustes"})]})]})}),(l||"TODOS"!==x)&&(0,a.jsxs)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{c(""),u("TODOS"),N(0)},className:"text-red-500 hover:text-red-700 hover:bg-red-50 h-9",children:[(0,a.jsx)(W.X,{className:"mr-2 h-3 w-3"}),"Limpiar"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:"Filas por pág:"}),(0,a.jsxs)(C.Select,{value:String(v),onValueChange:e=>y(Number(e)),children:[(0,a.jsx)(C.SelectTrigger,{className:"h-8 w-[70px] text-xs",children:(0,a.jsx)(C.SelectValue,{})}),(0,a.jsxs)(C.SelectContent,{children:[(0,a.jsx)(C.SelectItem,{value:"100",children:"100"}),(0,a.jsx)(C.SelectItem,{value:"500",children:"500"}),(0,a.jsx)(C.SelectItem,{value:"1000",children:"1000"})]})]})]})]}),(0,a.jsxs)("div",{className:"border rounded-md bg-white dark:bg-gray-800 flex flex-col",children:[(0,a.jsx)("div",{className:"overflow-auto max-h-[600px]",children:S?(0,a.jsx)("div",{className:"p-12 text-center text-muted-foreground",children:"Cargando movimientos..."}):(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{className:"bg-gray-50 sticky top-0 z-10",children:(0,a.jsxs)(i.TableRow,{className:"h-8",children:[(0,a.jsxs)(i.TableHead,{className:"w-[120px] cursor-pointer hover:bg-muted/50",onClick:()=>I("fecha_hora"),children:["Fecha ",h?.key==="fecha_hora"&&("asc"===h.direction?"↑":"↓")]}),(0,a.jsxs)(i.TableHead,{className:"w-[100px] cursor-pointer hover:bg-muted/50",onClick:()=>I("tipo_movimiento"),children:["Tipo ",h?.key==="tipo_movimiento"&&("asc"===h.direction?"↑":"↓")]}),(0,a.jsx)(i.TableHead,{className:"w-[80px]",children:"SKU"}),(0,a.jsxs)(i.TableHead,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>I("producto_nombre"),children:["Producto ",h?.key==="producto_nombre"&&("asc"===h.direction?"↑":"↓")]}),(0,a.jsxs)(i.TableHead,{className:"text-right w-[100px] cursor-pointer hover:bg-muted/50",onClick:()=>I("cantidad"),children:["Cant. ",h?.key==="cantidad"&&("asc"===h.direction?"↑":"↓")]}),(0,a.jsx)(i.TableHead,{className:"w-[50px]",children:"Und"})]})}),(0,a.jsxs)(i.TableBody,{children:[O?.length===0&&(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:6,className:"text-center h-32 text-muted-foreground",children:"No se encontraron movimientos con los filtros actuales."})}),O?.map(e=>(0,a.jsxs)(i.TableRow,{className:"hover:bg-muted/50 cursor-pointer h-8 border-b",onClick:()=>g(e),children:[(0,a.jsx)(i.TableCell,{className:"whitespace-nowrap font-mono text-xs text-muted-foreground py-1",children:(0,o.format)(new Date(e.fecha_hora),"dd/MM/yy HH:mm",{locale:n.es})}),(0,a.jsx)(i.TableCell,{className:"py-1",children:(0,a.jsx)(H.Badge,{variant:e.cantidad>0?"default":"VENTA"===e.tipo_movimiento?"destructive":"secondary",className:"text-xs px-2 py-0.5 h-5",children:e.tipo_movimiento})}),(0,a.jsx)(i.TableCell,{className:"text-xs font-mono py-1",children:e.id_sku}),(0,a.jsx)(i.TableCell,{className:"max-w-[300px] py-1",title:e.producto_nombre,children:(0,a.jsx)("div",{className:"truncate text-sm font-medium leading-tight",children:e.producto_nombre})}),(0,a.jsx)(i.TableCell,{className:`text-right font-bold text-sm py-1 ${e.cantidad<0?"text-red-500":"text-green-600"}`,children:Number(e.cantidad).toFixed(2)}),(0,a.jsx)(i.TableCell,{className:"text-xs text-muted-foreground py-1",children:e.unidad_medida})]},e.id_movimiento))]})]})}),(0,a.jsxs)("div",{className:"border-t p-2 bg-gray-50 flex items-center justify-between text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{children:["Mostrando ",O.length," de ",w," registros"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Button,{variant:"outline",size:"sm",className:"h-7 px-2",disabled:0===b||S,onClick:()=>N(e=>e-1),children:"Anterior"}),(0,a.jsxs)("span",{children:["Página ",b+1," de ",D||1]}),(0,a.jsx)(d.Button,{variant:"outline",size:"sm",className:"h-7 px-2",disabled:b>=D-1||S,onClick:()=>N(e=>e+1),children:"Siguiente"})]})]})]})]})}let Z=(0,e.i(75254).default)("recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);var Y=e.i(20755);let ee=async e=>{let a=Y.supabase.from("dat_retazos_disponibles").select(`
                *,
                cat_productos_variantes (
                    nombre_completo,
                    unidad_medida
                )
            `).order("fecha_creacion",{ascending:!1});e?.estado&&"TODOS"!==e.estado&&(a=a.eq("estado",e.estado));let{data:s,error:l}=await a;if(l)throw l;return s.map(e=>({...e,sku_nombre:e.cat_productos_variantes?.nombre_completo,sku_medida:e.cat_productos_variantes?.unidad_medida}))},ea=async e=>{let{data:a,error:s}=await Y.supabase.from("dat_retazos_disponibles").insert({...e,fecha_creacion:new Date().toISOString()}).select().single();if(s)throw s;return a},es=async e=>{let{data:a,error:s}=await Y.supabase.from("dat_retazos_disponibles").update({estado:"USADO",fecha_consumo:new Date().toISOString()}).eq("id_retazo",e).select().single();if(s)throw s;return a},el=k.z.object({id_sku_padre:k.z.string().min(1,"Debe seleccionar un perfil"),longitud_mm:k.z.coerce.number().min(1,"Longitud requerida"),ubicacion:k.z.string().optional(),estado:k.z.enum(["DISPONIBLE","ASIGNADO","USADO"]),orden_trabajo:k.z.string().optional()});function er({open:e,onOpenChange:l}){let t=(0,g.useQueryClient)(),[o,n]=(0,s.useState)(""),{data:i}=(0,r.useQuery)({queryKey:["catProductos"],queryFn:()=>D.catApi.getProductos({pageSize:1e4})}),c=i?.data||[],m=c?.filter(e=>e.nombre_familia?.toUpperCase().includes("PERFIL")||e.nombre_familia?.toUpperCase().includes("TUBO")||e.id_sku.startsWith("P-")||e.id_sku.startsWith("AL-"))||[],x=(0,h.useForm)({resolver:(0,j.zodResolver)(el),defaultValues:{estado:"DISPONIBLE",longitud_mm:0}}),N=(0,p.useMutation)({mutationFn:ea,onSuccess:()=>{alert("Retazo registrado correctamente"),t.invalidateQueries({queryKey:["retazos"]}),x.reset(),l(!1)},onError:e=>{console.error(e),alert("Error al registrar retazo")}});return(0,a.jsx)(u.Dialog,{open:e,onOpenChange:l,children:(0,a.jsxs)(u.DialogContent,{className:"sm:max-w-[600px] max-h-[90vh]",children:[(0,a.jsxs)(u.DialogHeader,{children:[(0,a.jsx)(u.DialogTitle,{children:"Registrar Nuevo Retazo"}),(0,a.jsx)(u.DialogDescription,{children:"Ingrese los detalles del sobrante reutilizable."})]}),(0,a.jsx)(v.Form,{...x,children:(0,a.jsxs)("form",{onSubmit:x.handleSubmit(e=>{N.mutate({...e,id_retazo:crypto.randomUUID(),ubicacion:e.ubicacion||null,orden_trabajo:e.orden_trabajo||null})}),className:"space-y-4",children:[(0,a.jsx)(v.FormField,{control:x.control,name:"id_sku_padre",render:({field:e})=>(0,a.jsxs)(v.FormItem,{children:[(0,a.jsx)(v.FormLabel,{children:"Perfil (SKU Padre)"}),(0,a.jsxs)(C.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(C.SelectTrigger,{children:(0,a.jsx)(C.SelectValue,{placeholder:"Seleccione un perfil..."})})}),(0,a.jsxs)(C.SelectContent,{className:"max-h-[350px] w-[550px]",children:[(0,a.jsx)("div",{className:"p-2 sticky top-0 bg-background border-b z-50",children:(0,a.jsx)(f.Input,{placeholder:"Buscar por código o nombre...",value:o,onChange:e=>n(e.target.value),className:"h-9",autoFocus:!0})}),(0,a.jsxs)("div",{className:"pt-1",children:[m.filter(e=>e.id_sku.toLowerCase().includes(o.toLowerCase())||e.nombre_completo.toLowerCase().includes(o.toLowerCase())).slice(0,50).map(e=>(0,a.jsx)(C.SelectItem,{value:e.id_sku,className:"py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,a.jsx)("span",{className:"font-mono font-bold text-primary bg-primary/10 px-2 py-0.5 rounded text-sm min-w-[150px]",children:e.id_sku}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground truncate flex-1",children:e.nombre_completo})]})},e.id_sku)),0===m.filter(e=>e.id_sku.toLowerCase().includes(o.toLowerCase())||e.nombre_completo.toLowerCase().includes(o.toLowerCase())).length&&(0,a.jsx)("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"No se encontraron perfiles"})]})]})]}),(0,a.jsx)(v.FormMessage,{})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(v.FormField,{control:x.control,name:"longitud_mm",render:({field:e})=>(0,a.jsxs)(v.FormItem,{children:[(0,a.jsx)(v.FormLabel,{children:"Longitud (mm)"}),(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(f.Input,{type:"number",...e})}),(0,a.jsx)(v.FormMessage,{})]})}),(0,a.jsx)(v.FormField,{control:x.control,name:"estado",render:({field:e})=>(0,a.jsxs)(v.FormItem,{children:[(0,a.jsx)(v.FormLabel,{children:"Estado"}),(0,a.jsxs)(C.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(C.SelectTrigger,{children:(0,a.jsx)(C.SelectValue,{})})}),(0,a.jsxs)(C.SelectContent,{children:[(0,a.jsx)(C.SelectItem,{value:"DISPONIBLE",children:"Disponible"}),(0,a.jsx)(C.SelectItem,{value:"ASIGNADO",children:"Asignado"}),(0,a.jsx)(C.SelectItem,{value:"USADO",children:"Usado"})]})]}),(0,a.jsx)(v.FormMessage,{})]})})]}),(0,a.jsx)(v.FormField,{control:x.control,name:"ubicacion",render:({field:e})=>(0,a.jsxs)(v.FormItem,{children:[(0,a.jsx)(v.FormLabel,{children:"Ubicación"}),(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(f.Input,{placeholder:"Ej. Estante A-3",...e})}),(0,a.jsx)(v.FormMessage,{})]})}),(0,a.jsx)(v.FormField,{control:x.control,name:"orden_trabajo",render:({field:e})=>(0,a.jsxs)(v.FormItem,{children:[(0,a.jsx)(v.FormLabel,{children:"Orden Trabajo (Opcional)"}),(0,a.jsx)(v.FormControl,{children:(0,a.jsx)(f.Input,{placeholder:"Ej. OT-2024-001",...e})}),(0,a.jsx)(v.FormMessage,{})]})}),(0,a.jsxs)(u.DialogFooter,{className:"pt-4",children:[(0,a.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),(0,a.jsxs)(d.Button,{type:"submit",disabled:N.isPending,children:[N.isPending&&(0,a.jsx)(b.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar Retazo"]})]})]})})]})})}function et(){let[e,l]=(0,s.useState)("TODOS"),[t,c]=(0,s.useState)(!1),m=(0,g.useQueryClient)(),{data:x,isLoading:u}=(0,r.useQuery)({queryKey:["retazos",e],queryFn:()=>ee({estado:e})}),h=(0,p.useMutation)({mutationFn:es,onSuccess:()=>{m.invalidateQueries({queryKey:["retazos"]}),alert("Retazo consumido exitosamente")},onError:e=>alert("Error al consumir: "+e.message)});return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4 p-4 border rounded-lg bg-gray-50 dark:bg-gray-900/50 items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Z,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Control de Retazos"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[(0,a.jsxs)(C.Select,{value:e,onValueChange:l,children:[(0,a.jsx)(C.SelectTrigger,{className:"w-[180px] bg-white",children:(0,a.jsx)(C.SelectValue,{placeholder:"Estado"})}),(0,a.jsxs)(C.SelectContent,{children:[(0,a.jsx)(C.SelectItem,{value:"TODOS",children:"Todos"}),(0,a.jsx)(C.SelectItem,{value:"DISPONIBLE",children:"Disponibles"}),(0,a.jsx)(C.SelectItem,{value:"ASIGNADO",children:"Asignados"}),(0,a.jsx)(C.SelectItem,{value:"USADO",children:"Usados"})]})]}),(0,a.jsx)(d.Button,{onClick:()=>c(!0),children:"+ Nuevo Retazo"})]})]}),(0,a.jsx)("div",{className:"border rounded-md bg-white dark:bg-gray-800",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"Fecha Crea."}),(0,a.jsx)(i.TableHead,{children:"Perfil / SKU"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Longitud"}),(0,a.jsx)(i.TableHead,{children:"Ubicación"}),(0,a.jsx)(i.TableHead,{children:"Estado"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,a.jsxs)(i.TableBody,{children:[x?.length===0&&(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:6,className:"text-center h-24 text-muted-foreground",children:"No hay retazos registrados con este filtro."})}),x?.map(e=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableCell,{className:"text-xs text-muted-foreground",children:(0,o.format)(new Date(e.fecha_creacion),"dd/MM/yy",{locale:n.es})}),(0,a.jsx)(i.TableCell,{children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e.sku_nombre}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.id_sku_padre})]})}),(0,a.jsxs)(i.TableCell,{className:"text-right font-mono font-bold",children:[e.longitud_mm," mm"]}),(0,a.jsx)(i.TableCell,{className:"text-sm",children:e.ubicacion||"-"}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(H.Badge,{variant:"DISPONIBLE"===e.estado?"default":"USADO"===e.estado?"secondary":"outline",className:`
                                        ${"DISPONIBLE"===e.estado?"bg-green-100 text-green-800 hover:bg-green-200":""}
                                        ${"ASIGNADO"===e.estado?"bg-amber-100 text-amber-800 hover:bg-amber-200":""}
                                        ${"USADO"===e.estado?"bg-gray-100 text-gray-400 hover:bg-gray-200 line-through":""}
                                    `,children:e.estado})}),(0,a.jsxs)(i.TableCell,{className:"text-right",children:["USADO"!==e.estado&&(0,a.jsx)(d.Button,{size:"sm",variant:"outline",className:"h-7 text-xs border-green-200 hover:bg-green-50 text-green-700",onClick:()=>{var a;return a=e.id_retazo,void(confirm("¿Confirmar que este retazo ha sido utilizado?")&&h.mutate(a))},title:"Consumir Retazo",children:"Consumir"}),"USADO"===e.estado&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.fecha_consumo?(0,o.format)(new Date(e.fecha_consumo),"dd/MM",{locale:n.es}):"Consumido"})]})]},e.id_retazo))]})]})}),(0,a.jsx)(er,{open:t,onOpenChange:c})]})}function eo(){let[e,r]=(0,s.useState)("kardex");return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-baseline gap-2 md:gap-4 border-b pb-2",children:[(0,a.jsx)("h2",{className:"text-xl font-bold tracking-tight",children:"Gestión de Inventario"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Control de stock, registro de compras y salidas de material."})]}),(0,a.jsxs)(l.Tabs,{value:e,onValueChange:r,className:"space-y-4",children:[(0,a.jsxs)(l.TabsList,{children:[(0,a.jsx)(l.TabsTrigger,{value:"kardex",children:"Kardex (Movimientos)"}),(0,a.jsx)(l.TabsTrigger,{value:"entradas",children:"Entradas (Compras)"}),(0,a.jsx)(l.TabsTrigger,{value:"salidas",children:"Salidas (Consumos/Ventas)"}),(0,a.jsx)(l.TabsTrigger,{value:"retazos",className:"flex items-center gap-2",children:"Retazos (Offcuts)"})]}),(0,a.jsx)(l.TabsContent,{value:"kardex",className:"space-y-4",children:(0,a.jsx)(X,{active:"kardex"===e})}),(0,a.jsx)(l.TabsContent,{value:"entradas",className:"space-y-4",children:(0,a.jsx)(L,{active:"entradas"===e})}),(0,a.jsx)(l.TabsContent,{value:"salidas",className:"space-y-4",children:(0,a.jsx)($,{active:"salidas"===e})}),(0,a.jsx)(l.TabsContent,{value:"retazos",className:"space-y-4",children:(0,a.jsx)(et,{})})]})]})}e.s(["default",()=>eo],19608)}]);