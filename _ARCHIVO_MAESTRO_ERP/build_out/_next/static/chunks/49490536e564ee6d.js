(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94179,e=>{"use strict";var t=e.i(43476),r=e.i(25913),a=e.i(47163);let n=(0,r.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:r,...o}){return(0,t.jsx)("div",{className:(0,a.cn)(n({variant:r}),e),...o})}e.s(["Badge",()=>o])},16715,e=>{"use strict";let t=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},21557,e=>{"use strict";let t=(0,e.i(75254).default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);e.s(["Calculator",()=>t],21557)},84765,e=>{"use strict";let t=(0,e.i(75254).default)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);e.s(["Settings2",()=>t],84765)},74886,64659,e=>{"use strict";let t=(0,e.i(75254).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886);var r=e.i(31171);e.s(["ChevronDown",()=>r.default],64659)},9306,e=>{"use strict";var t=e.i(74117);function r(){let{toast:e}=(0,t.useToast)();return{success:(t,r)=>{e({title:`✅ ${t}`,description:r,duration:3e3})},error:(t,r)=>{e({variant:"destructive",title:`❌ ${t}`,description:r,duration:5e3})},warning:(t,r)=>{e({title:`⚠️ ${t}`,description:r,className:"border-orange-500",duration:4e3})},info:(t,r)=>{e({title:`ℹ️ ${t}`,description:r,duration:3e3})},loading:(t,r)=>e({title:`⏳ ${t}`,description:r,duration:1/0})}}e.s(["useToastHelper",()=>r])},71287,17931,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(55436),n=e.i(43531),o=e.i(67881),i=e.i(23750),l=e.i(59377),s=e.i(20755);let c={getModelos:async()=>{let{data:e,error:t}=await s.supabase.from("mst_recetas_modelos").select(`
        *,
        mst_series_equivalencias (nombre_comercial)
      `).eq("activo",!0).order("id_sistema").order("nombre_comercial");if(t)throw t;return e||[]},getModeloById:async e=>{let{data:t,error:r}=await s.supabase.from("mst_recetas_modelos").select(`
        *,
        mst_series_equivalencias (nombre_comercial)
      `).eq("id_modelo",e).single();if(r)throw r;return t},createModelo:async e=>{let{data:t,error:r}=await s.supabase.from("mst_recetas_modelos").insert(e).select().single();if(r)throw r;return t},updateModelo:async(e,t)=>{let{mst_series_equivalencias:r,created_at:a,...n}=t,{data:o,error:i}=await s.supabase.from("mst_recetas_modelos").update(n).eq("id_modelo",e).select().single();if(i)throw i;return o},deleteModelo:async e=>{let{error:t}=await s.supabase.from("mst_recetas_ingenieria").delete().eq("id_modelo",e);if(t)throw t;let{error:r}=await s.supabase.from("mst_recetas_modelos").delete().eq("id_modelo",e);if(r)throw r},clonarModelo:async(e,t,r)=>{let a=await c.getModeloById(e);if(!a)throw Error("Modelo original no encontrado");let n=await c.createModelo({id_modelo:t,id_sistema:a.id_sistema,nombre_comercial:r,num_hojas:a.num_hojas,descripcion:`Copia de ${a.nombre_comercial}`,activo:!0});for(let r of(await c.getRecetasByModelo(e))){let e=`${t}-${r.id_plantilla||"X"}-${Date.now()}`;await c.createRecetaLinea({id_receta:e,id_modelo:t,id_sistema:r.id_sistema,id_plantilla:r.id_plantilla,id_material_receta:r.id_material_receta,nombre_componente:r.nombre_componente,tipo:r.tipo,cantidad_base:r.cantidad_base,angulo:r.angulo,condicion:r.condicion,formula_cantidad:r.formula_cantidad,formula_perfil:r.formula_perfil,seccion:r.seccion,orden_visual:r.orden_visual,precio_unitario_manual:r.precio_unitario_manual})}return n},getRecetasByModelo:async e=>{let{data:t,error:r}=await s.supabase.from("mst_recetas_ingenieria").select(`
        *,
        cat_plantillas (nombre_generico, id_familia)
      `).eq("id_modelo",e).order("seccion").order("orden_visual").order("nombre_componente");if(r)throw r;return t||[]},createRecetaLinea:async e=>{let{data:t,error:r}=await s.supabase.from("mst_recetas_ingenieria").insert(e).select().single();if(r)throw r;return t},updateRecetaLinea:async(e,t)=>{let{cat_plantillas:r,...a}=t,{data:n,error:o}=await s.supabase.from("mst_recetas_ingenieria").update(a).eq("id_receta",e).select().single();if(o)throw o;return n},deleteRecetaLinea:async e=>{let{error:t}=await s.supabase.from("mst_recetas_ingenieria").delete().eq("id_receta",e);if(t)throw t},getAllRecetasConCatalogInfo:async()=>{let{data:e,error:t}=await s.supabase.from("mst_recetas_ingenieria").select(`
                *,
                mst_recetas_modelos (nombre_comercial, id_sistema, num_hojas, activo),
                cat_plantillas (nombre_generico)
            `).order("id_modelo");if(t)throw t;if(!e||0===e.length)return[];let{data:r,error:a}=await s.supabase.from("cat_productos_variantes").select("id_sku, costo_mercado_unit");if(a)throw a;let n=new Map(r?.map(e=>[e.id_sku,e.costo_mercado_unit]));return e.map(e=>({...e,modelo_nombre:e.mst_recetas_modelos?.nombre_comercial,modelo_activo:e.mst_recetas_modelos?.activo,precio_catalogo:e.id_sku_catalogo?n.get(e.id_sku_catalogo):null}))},getAccesoriosConPrecio:async e=>{let{data:t,error:r}=await s.supabase.from("mst_recetas_ingenieria").select(`
        id_receta,
        nombre_componente,
        id_plantilla,
        formula_cantidad,
        precio_unitario_manual,
        cat_plantillas (nombre_generico)
      `).eq("id_modelo",e).in("tipo",["Accesorio","Servicio"]);if(r)throw r;if(!t||0===t.length)return[];let a=t.map(e=>e.id_plantilla).filter(Boolean);if(0===a.length)return t;let{data:n,error:o}=await s.supabase.from("cat_productos_variantes").select("id_sku, id_plantilla, nombre_completo, costo_mercado_unit, moneda_costo, fecha_act_precio").in("id_plantilla",a).eq("id_material","GEN");if(o)throw o;return t.map(e=>{let t=n?.find(t=>t.id_plantilla===e.id_plantilla);return{...e,sku_catalogo:t?.id_sku||null,nombre_producto:t?.nombre_completo||null,precio_catalogo:t?.costo_mercado_unit||null,moneda_precio:t?.moneda_costo||"PEN",fecha_precio:t?.fecha_act_precio||null}})},updatePrecioAccesorio:async(e,t)=>{let{error:r}=await s.supabase.from("cat_productos_variantes").update({costo_mercado_unit:t,fecha_act_precio:new Date().toISOString()}).eq("id_sku",e);if(r)throw r},getPlantillas:async()=>{let{data:e,error:t}=await s.supabase.from("cat_plantillas").select("id_plantilla, nombre_generico, id_familia").order("nombre_generico");if(t)throw t;return e||[]},getSistemas:async()=>{let{data:e,error:t}=await s.supabase.from("mst_series_equivalencias").select("id_sistema, nombre_comercial").order("nombre_comercial");if(t)throw t;return e||[]},getVariantesAccesorios:async()=>{let{data:e,error:t}=await s.supabase.from("cat_productos_variantes").select("id_sku, id_plantilla, id_material, nombre_completo, costo_mercado_unit, moneda_costo").order("id_sku");if(t)throw t;return e||[]},buscarProductosCatalogo:async(e="",t=50)=>{let r=s.supabase.from("vw_stock_realtime").select("*",{count:"exact"});e&&(r=r.or(`id_sku.ilike.%${e}%,nombre_completo.ilike.%${e}%`)),r=r.order("id_sku",{ascending:!0}).range(0,t-1);let{data:a,error:n}=await r;if(n)throw n;return a||[]},getProductoPorSku:async e=>{let{data:t,error:r}=await s.supabase.from("vw_stock_realtime").select("*").eq("id_sku",e).maybeSingle();if(r)throw r;return t},getRecetasOptions:async()=>{let{data:e,error:t}=await s.supabase.from("mst_recetas_ingenieria").select("*").not("grupo_opcion","is",null).order("orden_visual");if(t)throw t;return e||[]}};function d({value:e,onChange:s,initialSearch:d="",placeholder:u="Buscar producto..."}){let[m,f]=(0,r.useState)(!1),[p,h]=(0,r.useState)(d),[v,g]=(0,r.useState)(!1),[_,b]=(0,r.useState)([]),[y,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(e&&!y){let t=_.find(t=>t.id_sku===e);t?x(t):c.getProductoPorSku(e).then(e=>{e&&x(e)}).catch(console.error)}},[e,_]),(0,r.useEffect)(()=>{m&&0===_.length&&w(p)},[m]);let w=async e=>{g(!0);try{let t=await c.buscarProductosCatalogo(e,50);b(t)}catch(e){console.error(e),b([])}finally{g(!1)}};return(0,t.jsxs)(l.Popover,{open:m,onOpenChange:f,children:[(0,t.jsx)(l.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(o.Button,{variant:"outline",role:"combobox","aria-expanded":m,className:"w-full justify-between h-8 text-xs font-normal",children:[(0,t.jsx)("span",{className:"truncate font-mono",children:e||u}),y&&(0,t.jsx)("span",{className:"ml-2 text-[10px] text-muted-foreground truncate max-w-[150px]",children:y.nombre_completo}),(0,t.jsx)(a.Search,{className:"ml-2 h-3 w-3 shrink-0 opacity-50"})]})}),(0,t.jsxs)(l.PopoverContent,{className:"w-[400px] p-0",align:"start",children:[(0,t.jsxs)("div",{className:"flex items-center border-b px-3",children:[(0,t.jsx)(a.Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,t.jsx)(i.Input,{className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-0 focus-visible:ring-0",placeholder:"Buscar SKU o nombre (Enter)...",value:p,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),w(p))}}),(0,t.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:()=>w(p),disabled:v,children:v?"...":"Buscar"})]}),(0,t.jsxs)("div",{className:"max-h-[300px] overflow-y-auto p-1",children:[0===_.length&&!v&&(0,t.jsx)("p",{className:"p-4 text-center text-sm text-muted-foreground",children:"No se encontraron productos."}),_.map(r=>(0,t.jsxs)("div",{className:`flex items-start gap-2 p-2 rounded-sm cursor-pointer hover:bg-accent text-sm ${e===r.id_sku?"bg-accent":""}`,onClick:()=>{s(r.id_sku,r),x(r),f(!1)},children:[(0,t.jsx)(n.Check,{className:`h-4 w-4 mt-1 ${e===r.id_sku?"opacity-100":"opacity-0"}`}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:r.nombre_completo}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground flex justify-between",children:[(0,t.jsx)("span",{className:"font-mono",children:r.id_sku}),(0,t.jsxs)("span",{children:["Stock: ",r.stock_actual]})]}),(0,t.jsxs)("div",{className:"text-xs text-green-600 font-semibold mt-1",children:["Precio: ",r.moneda_reposicion," ",r.costo_mercado_unit?.toFixed(2)]})]})]},r.id_sku))]})]})]})}e.s(["recetasApi",0,c],17931),e.s(["CatalogSkuSelector",()=>d],71287)},53751,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=/[\\\/_+.#"@\[\(\{&]/,n=/[\\\/_+.#"@\[\(\{&]/g,o=/[\s-]/,i=/[\s-]/g;function l(e){return e.toLowerCase().replace(i," ")}var s=e.i(26999),c=e.i(48425),d=e.i(10772),u=e.i(20783),m='[cmdk-group=""]',f='[cmdk-group-items=""]',p='[cmdk-item=""]',h=`${p}:not([aria-disabled="true"])`,v="cmdk-item-select",g="data-value",_=(e,t,r)=>{var s;return s=e,function e(t,r,l,s,c,d,u){if(d===r.length)return c===t.length?1:.99;var m=`${c},${d}`;if(void 0!==u[m])return u[m];for(var f,p,h,v,g=s.charAt(d),_=l.indexOf(g,c),b=0;_>=0;)(f=e(t,r,l,s,_+1,d+1,u))>b&&(_===c?f*=1:a.test(t.charAt(_-1))?(f*=.8,(h=t.slice(c,_-1).match(n))&&c>0&&(f*=Math.pow(.999,h.length))):o.test(t.charAt(_-1))?(f*=.9,(v=t.slice(c,_-1).match(i))&&c>0&&(f*=Math.pow(.999,v.length))):(f*=.17,c>0&&(f*=Math.pow(.999,_-c))),t.charAt(_)!==r.charAt(d)&&(f*=.9999)),(f<.1&&l.charAt(_-1)===s.charAt(d+1)||s.charAt(d+1)===s.charAt(d)&&l.charAt(_-1)!==s.charAt(d))&&.1*(p=e(t,r,l,s,_+1,d+2,u))>f&&(f=.1*p),f>b&&(b=f),_=l.indexOf(g,_+1);return u[m]=b,b}(s=r&&r.length>0?`${s+" "+r.join(" ")}`:s,t,l(s),l(t),0,0,{})},b=r.createContext(void 0),y=r.createContext(void 0),x=r.createContext(void 0),w=r.forwardRef((e,t)=>{let a=P(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=P(()=>new Set),o=P(()=>new Map),i=P(()=>new Map),l=P(()=>new Set),s=I(e),{label:u,children:x,value:w,onValueChange:k,filter:C,shouldFilter:E,loop:S,disablePointerSelection:R=!1,vimBindings:N=!0,...j}=e,A=(0,d.useId)(),q=(0,d.useId)(),L=(0,d.useId)(),O=r.useRef(null),V=$();M(()=>{if(void 0!==w){let e=w.trim();a.current.value=e,K.emit()}},[w]),M(()=>{V(6,G)},[]);let K=r.useMemo(()=>({subscribe:e=>(l.current.add(e),()=>l.current.delete(e)),snapshot:()=>a.current,setState:(e,t,r)=>{var n,o,i,l;if(!Object.is(a.current[e],t)){if(a.current[e]=t,"search"===e)U(),z(),V(1,H);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(L);e?e.focus():null==(n=document.getElementById(A))||n.focus()}if(V(7,()=>{var e;a.current.selectedItemId=null==(e=W())?void 0:e.id,K.emit()}),r||V(5,G),(null==(o=s.current)?void 0:o.value)!==void 0){null==(l=(i=s.current).onValueChange)||l.call(i,null!=t?t:"");return}}K.emit()}},emit:()=>{l.current.forEach(e=>e())}}),[]),T=r.useMemo(()=>({value:(e,t,r)=>{var n;t!==(null==(n=i.current.get(e))?void 0:n.value)&&(i.current.set(e,{value:t,keywords:r}),a.current.filtered.items.set(e,F(t,r)),V(2,()=>{z(),K.emit()}))},item:(e,t)=>(n.current.add(e),t&&(o.current.has(t)?o.current.get(t).add(e):o.current.set(t,new Set([e]))),V(3,()=>{U(),z(),a.current.value||H(),K.emit()}),()=>{i.current.delete(e),n.current.delete(e),a.current.filtered.items.delete(e);let t=W();V(4,()=>{U(),(null==t?void 0:t.getAttribute("id"))===e&&H(),K.emit()})}),group:e=>(o.current.has(e)||o.current.set(e,new Set),()=>{i.current.delete(e),o.current.delete(e)}),filter:()=>s.current.shouldFilter,label:u||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:A,inputId:L,labelId:q,listInnerRef:O}),[]);function F(e,t){var r,n;let o=null!=(n=null==(r=s.current)?void 0:r.filter)?n:_;return e?o(e,a.current.search,t):0}function z(){if(!a.current.search||!1===s.current.shouldFilter)return;let e=a.current.filtered.items,t=[];a.current.filtered.groups.forEach(r=>{let a=o.current.get(r),n=0;a.forEach(t=>{n=Math.max(e.get(t),n)}),t.push([r,n])});let r=O.current;X().sort((t,r)=>{var a,n;let o=t.getAttribute("id"),i=r.getAttribute("id");return(null!=(a=e.get(i))?a:0)-(null!=(n=e.get(o))?n:0)}).forEach(e=>{let t=e.closest(f);t?t.appendChild(e.parentElement===t?e:e.closest(`${f} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${f} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=O.current)?void 0:t.querySelector(`${m}[${g}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function H(){let e=X().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(g);K.setState("value",t||void 0)}function U(){var e,t,r,l;if(!a.current.search||!1===s.current.shouldFilter){a.current.filtered.count=n.current.size;return}a.current.filtered.groups=new Set;let c=0;for(let o of n.current){let n=F(null!=(t=null==(e=i.current.get(o))?void 0:e.value)?t:"",null!=(l=null==(r=i.current.get(o))?void 0:r.keywords)?l:[]);a.current.filtered.items.set(o,n),n>0&&c++}for(let[e,t]of o.current)for(let r of t)if(a.current.filtered.items.get(r)>0){a.current.filtered.groups.add(e);break}a.current.filtered.count=c}function G(){var e,t,r;let a=W();a&&((null==(e=a.parentElement)?void 0:e.firstChild)===a&&(null==(r=null==(t=a.closest(m))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function W(){var e;return null==(e=O.current)?void 0:e.querySelector(`${p}[aria-selected="true"]`)}function X(){var e;return Array.from((null==(e=O.current)?void 0:e.querySelectorAll(h))||[])}function J(e){let t=X()[e];t&&K.setState("value",t.getAttribute(g))}function Q(e){var t;let r=W(),a=X(),n=a.findIndex(e=>e===r),o=a[n+e];null!=(t=s.current)&&t.loop&&(o=n+e<0?a[a.length-1]:n+e===a.length?a[0]:a[n+e]),o&&K.setState("value",o.getAttribute(g))}function Y(e){let t=W(),r=null==t?void 0:t.closest(m),a;for(;r&&!a;)a=null==(r=e>0?function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}(r,m):function(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}(r,m))?void 0:r.querySelector(h);a?K.setState("value",a.getAttribute(g)):Q(e)}let Z=()=>J(X().length-1),ee=e=>{e.preventDefault(),e.metaKey?Z():e.altKey?Y(1):Q(1)},et=e=>{e.preventDefault(),e.metaKey?J(0):e.altKey?Y(-1):Q(-1)};return r.createElement(c.Primitive.div,{ref:t,tabIndex:-1,...j,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=j.onKeyDown)||t.call(j,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!(e.defaultPrevented||r))switch(e.key){case"n":case"j":N&&e.ctrlKey&&ee(e);break;case"ArrowDown":ee(e);break;case"p":case"k":N&&e.ctrlKey&&et(e);break;case"ArrowUp":et(e);break;case"Home":e.preventDefault(),J(0);break;case"End":e.preventDefault(),Z();break;case"Enter":{e.preventDefault();let t=W();if(t){let e=new Event(v);t.dispatchEvent(e)}}}}},r.createElement("label",{"cmdk-label":"",htmlFor:T.inputId,id:T.labelId,style:B},u),D(e,e=>r.createElement(y.Provider,{value:K},r.createElement(b.Provider,{value:T},e))))}),k=r.forwardRef((e,t)=>{var a,n;let o=(0,d.useId)(),i=r.useRef(null),l=r.useContext(x),s=r.useContext(b),m=I(e),f=null!=(n=null==(a=m.current)?void 0:a.forceMount)?n:null==l?void 0:l.forceMount;M(()=>{if(!f)return s.item(o,null==l?void 0:l.id)},[f]);let p=q(o,i,[e.value,e.children,i],e.keywords),h=r.useContext(y),g=A(e=>e.value&&e.value===p.current),_=A(e=>!!f||!1===s.filter()||!e.search||e.filtered.items.get(o)>0);function w(){var e,t;k(),null==(t=(e=m.current).onSelect)||t.call(e,p.current)}function k(){h.setState("value",p.current,!0)}if(r.useEffect(()=>{let t=i.current;if(!(!t||e.disabled))return t.addEventListener(v,w),()=>t.removeEventListener(v,w)},[_,e.onSelect,e.disabled]),!_)return null;let{disabled:C,value:E,onSelect:S,forceMount:R,keywords:N,...j}=e;return r.createElement(c.Primitive.div,{ref:(0,u.composeRefs)(i,t),...j,id:o,"cmdk-item":"",role:"option","aria-disabled":!!C,"aria-selected":!!g,"data-disabled":!!C,"data-selected":!!g,onPointerMove:C||s.getDisablePointerSelection()?void 0:k,onClick:C?void 0:w},e.children)}),C=r.forwardRef((e,t)=>{let{heading:a,children:n,forceMount:o,...i}=e,l=(0,d.useId)(),s=r.useRef(null),m=r.useRef(null),f=(0,d.useId)(),p=r.useContext(b),h=A(e=>!!o||!1===p.filter()||!e.search||e.filtered.groups.has(l));M(()=>p.group(l),[]),q(l,s,[e.value,e.heading,m]);let v=r.useMemo(()=>({id:l,forceMount:o}),[o]);return r.createElement(c.Primitive.div,{ref:(0,u.composeRefs)(s,t),...i,"cmdk-group":"",role:"presentation",hidden:!h||void 0},a&&r.createElement("div",{ref:m,"cmdk-group-heading":"","aria-hidden":!0,id:f},a),D(e,e=>r.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?f:void 0},r.createElement(x.Provider,{value:v},e))))}),E=r.forwardRef((e,t)=>{let{alwaysRender:a,...n}=e,o=r.useRef(null),i=A(e=>!e.search);return a||i?r.createElement(c.Primitive.div,{ref:(0,u.composeRefs)(o,t),...n,"cmdk-separator":"",role:"separator"}):null}),S=r.forwardRef((e,t)=>{let{onValueChange:a,...n}=e,o=null!=e.value,i=r.useContext(y),l=A(e=>e.search),s=A(e=>e.selectedItemId),d=r.useContext(b);return r.useEffect(()=>{null!=e.value&&i.setState("search",e.value)},[e.value]),r.createElement(c.Primitive.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":s,id:d.inputId,type:"text",value:o?e.value:l,onChange:e=>{o||i.setState("search",e.target.value),null==a||a(e.target.value)}})}),R=r.forwardRef((e,t)=>{let{children:a,label:n="Suggestions",...o}=e,i=r.useRef(null),l=r.useRef(null),s=A(e=>e.selectedItemId),d=r.useContext(b);return r.useEffect(()=>{if(l.current&&i.current){let e=l.current,t=i.current,r,a=new ResizeObserver(()=>{r=requestAnimationFrame(()=>{let r=e.offsetHeight;t.style.setProperty("--cmdk-list-height",r.toFixed(1)+"px")})});return a.observe(e),()=>{cancelAnimationFrame(r),a.unobserve(e)}}},[]),r.createElement(c.Primitive.div,{ref:(0,u.composeRefs)(i,t),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":n,id:d.listId},D(e,e=>r.createElement("div",{ref:(0,u.composeRefs)(l,d.listInnerRef),"cmdk-list-sizer":""},e)))}),N=r.forwardRef((e,t)=>{let{open:a,onOpenChange:n,overlayClassName:o,contentClassName:i,container:l,...c}=e;return r.createElement(s.Root,{open:a,onOpenChange:n},r.createElement(s.Portal,{container:l},r.createElement(s.Overlay,{"cmdk-overlay":"",className:o}),r.createElement(s.Content,{"aria-label":e.label,"cmdk-dialog":"",className:i},r.createElement(w,{ref:t,...c}))))}),j=Object.assign(w,{List:R,Item:k,Input:S,Group:C,Separator:E,Dialog:N,Empty:r.forwardRef((e,t)=>A(e=>0===e.filtered.count)?r.createElement(c.Primitive.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Loading:r.forwardRef((e,t)=>{let{progress:a,children:n,label:o="Loading...",...i}=e;return r.createElement(c.Primitive.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},D(e,e=>r.createElement("div",{"aria-hidden":!0},e)))})});function I(e){let t=r.useRef(e);return M(()=>{t.current=e}),t}var M="u"<typeof window?r.useEffect:r.useLayoutEffect;function P(e){let t=r.useRef();return void 0===t.current&&(t.current=e()),t}function A(e){let t=r.useContext(y),a=()=>e(t.snapshot());return r.useSyncExternalStore(t.subscribe,a,a)}function q(e,t,a,n=[]){let o=r.useRef(),i=r.useContext(b);return M(()=>{var r;let l=(()=>{var e;for(let t of a){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():o.current}})(),s=n.map(e=>e.trim());i.value(e,l,s),null==(r=t.current)||r.setAttribute(g,l),o.current=l}),o}var $=()=>{let[e,t]=r.useState(),a=P(()=>new Map);return M(()=>{a.current.forEach(e=>e()),a.current=new Map},[e]),(e,r)=>{a.current.set(e,r),t({})}};function D({asChild:e,children:t},a){let n;return e&&r.isValidElement(t)?r.cloneElement("function"==typeof(n=t.type)?n(t.props):"render"in n?n.render(t.props):t,{ref:t.ref},a(t.props.children)):a(t)}var B={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},L=e.i(55436),O=e.i(47163);e.i(30374);let V=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(j,{ref:a,className:(0,O.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...r}));V.displayName=j.displayName;let K=r.forwardRef(({className:e,...r},a)=>(0,t.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,t.jsx)(L.Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,t.jsx)(j.Input,{ref:a,className:(0,O.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...r})]}));K.displayName=j.Input.displayName;let T=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(j.List,{ref:a,className:(0,O.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...r}));T.displayName=j.List.displayName;let F=r.forwardRef((e,r)=>(0,t.jsx)(j.Empty,{ref:r,className:"py-6 text-center text-sm",...e}));F.displayName=j.Empty.displayName;let z=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(j.Group,{ref:a,className:(0,O.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...r}));z.displayName=j.Group.displayName,r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(j.Separator,{ref:a,className:(0,O.cn)("-mx-1 h-px bg-border",e),...r})).displayName=j.Separator.displayName;let H=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(j.Item,{ref:a,className:(0,O.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r}));H.displayName=j.Item.displayName,e.s(["Command",()=>V,"CommandEmpty",()=>F,"CommandGroup",()=>z,"CommandInput",()=>K,"CommandItem",()=>H,"CommandList",()=>T],53751)},44523,e=>{"use strict";let t=(0,e.i(75254).default)("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);e.s(["ChevronsUpDown",()=>t],44523)},88844,e=>{"use strict";let t=(0,e.i(75254).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],88844)},87607,e=>{"use strict";var t=e.i(71645),r=e.i(81140),a=e.i(12129),n=e.i(69340),o=e.i(34620),i=e.i(20783),l=e.i(48425),s=e.i(96626),c=e.i(10772),d=e.i(43476),u="Collapsible",[m,f]=(0,a.createContextScope)(u),[p,h]=m(u),v=t.forwardRef((e,r)=>{let{__scopeCollapsible:a,open:o,defaultOpen:i,disabled:s,onOpenChange:m,...f}=e,[h,v]=(0,n.useControllableState)({prop:o,defaultProp:i??!1,onChange:m,caller:u});return(0,d.jsx)(p,{scope:a,disabled:s,contentId:(0,c.useId)(),open:h,onOpenToggle:t.useCallback(()=>v(e=>!e),[v]),children:(0,d.jsx)(l.Primitive.div,{"data-state":w(h),"data-disabled":s?"":void 0,...f,ref:r})})});v.displayName=u;var g="CollapsibleTrigger",_=t.forwardRef((e,t)=>{let{__scopeCollapsible:a,...n}=e,o=h(g,a);return(0,d.jsx)(l.Primitive.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":w(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...n,ref:t,onClick:(0,r.composeEventHandlers)(e.onClick,o.onOpenToggle)})});_.displayName=g;var b="CollapsibleContent",y=t.forwardRef((e,t)=>{let{forceMount:r,...a}=e,n=h(b,e.__scopeCollapsible);return(0,d.jsx)(s.Presence,{present:r||n.open,children:({present:e})=>(0,d.jsx)(x,{...a,ref:t,present:e})})});y.displayName=b;var x=t.forwardRef((e,r)=>{let{__scopeCollapsible:a,present:n,children:s,...c}=e,u=h(b,a),[m,f]=t.useState(n),p=t.useRef(null),v=(0,i.useComposedRefs)(r,p),g=t.useRef(0),_=g.current,y=t.useRef(0),x=y.current,k=u.open||m,C=t.useRef(k),E=t.useRef(void 0);return t.useEffect(()=>{let e=requestAnimationFrame(()=>C.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,o.useLayoutEffect)(()=>{let e=p.current;if(e){E.current=E.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();g.current=t.height,y.current=t.width,C.current||(e.style.transitionDuration=E.current.transitionDuration,e.style.animationName=E.current.animationName),f(n)}},[u.open,n]),(0,d.jsx)(l.Primitive.div,{"data-state":w(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!k,...c,ref:v,style:{"--radix-collapsible-content-height":_?`${_}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...e.style},children:k&&s})});function w(e){return e?"open":"closed"}e.s(["Collapsible",()=>v,"CollapsibleContent",()=>y,"CollapsibleTrigger",()=>_,"Content",()=>y,"Root",()=>v,"Trigger",()=>_,"createCollapsibleScope",()=>f])}]);