(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},21557,e=>{"use strict";let t=(0,e.i(75254).default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);e.s(["Calculator",()=>t],21557)},84765,e=>{"use strict";let t=(0,e.i(75254).default)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);e.s(["Settings2",()=>t],84765)},74886,64659,e=>{"use strict";let t=(0,e.i(75254).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886);var r=e.i(31171);e.s(["ChevronDown",()=>r.default],64659)},9306,e=>{"use strict";var t=e.i(74117);function r(){let{toast:e}=(0,t.useToast)();return{success:(t,r)=>{e({title:`✅ ${t}`,description:r,duration:3e3})},error:(t,r)=>{e({variant:"destructive",title:`❌ ${t}`,description:r,duration:5e3})},warning:(t,r)=>{e({title:`⚠️ ${t}`,description:r,className:"border-orange-500",duration:4e3})},info:(t,r)=>{e({title:`ℹ️ ${t}`,description:r,duration:3e3})},loading:(t,r)=>e({title:`⏳ ${t}`,description:r,duration:1/0})}}e.s(["useToastHelper",()=>r])},44523,e=>{"use strict";let t=(0,e.i(75254).default)("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);e.s(["ChevronsUpDown",()=>t],44523)},53751,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=/[\\\/_+.#"@\[\(\{&]/,o=/[\\\/_+.#"@\[\(\{&]/g,n=/[\s-]/,l=/[\s-]/g;function i(e){return e.toLowerCase().replace(l," ")}var s=e.i(26999),c=e.i(48425),d=e.i(10772),u=e.i(20783),p='[cmdk-group=""]',m='[cmdk-group-items=""]',f='[cmdk-item=""]',g=`${f}:not([aria-disabled="true"])`,h="cmdk-item-select",v="data-value",x=(e,t,r)=>{var s;return s=e,function e(t,r,i,s,c,d,u){if(d===r.length)return c===t.length?1:.99;var p=`${c},${d}`;if(void 0!==u[p])return u[p];for(var m,f,g,h,v=s.charAt(d),x=i.indexOf(v,c),b=0;x>=0;)(m=e(t,r,i,s,x+1,d+1,u))>b&&(x===c?m*=1:a.test(t.charAt(x-1))?(m*=.8,(g=t.slice(c,x-1).match(o))&&c>0&&(m*=Math.pow(.999,g.length))):n.test(t.charAt(x-1))?(m*=.9,(h=t.slice(c,x-1).match(l))&&c>0&&(m*=Math.pow(.999,h.length))):(m*=.17,c>0&&(m*=Math.pow(.999,x-c))),t.charAt(x)!==r.charAt(d)&&(m*=.9999)),(m<.1&&i.charAt(x-1)===s.charAt(d+1)||s.charAt(d+1)===s.charAt(d)&&i.charAt(x-1)!==s.charAt(d))&&.1*(f=e(t,r,i,s,x+1,d+2,u))>m&&(m=.1*f),m>b&&(b=m),x=i.indexOf(v,x+1);return u[p]=b,b}(s=r&&r.length>0?`${s+" "+r.join(" ")}`:s,t,i(s),i(t),0,0,{})},b=r.createContext(void 0),_=r.createContext(void 0),y=r.createContext(void 0),w=r.forwardRef((e,t)=>{let a=I(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),o=I(()=>new Set),n=I(()=>new Map),l=I(()=>new Map),i=I(()=>new Set),s=S(e),{label:u,children:y,value:w,onValueChange:k,filter:C,shouldFilter:j,loop:R,disablePointerSelection:E=!1,vimBindings:P=!0,...N}=e,A=(0,d.useId)(),M=(0,d.useId)(),$=(0,d.useId)(),q=r.useRef(null),H=O();D(()=>{if(void 0!==w){let e=w.trim();a.current.value=e,B.emit()}},[w]),D(()=>{H(6,G)},[]);let B=r.useMemo(()=>({subscribe:e=>(i.current.add(e),()=>i.current.delete(e)),snapshot:()=>a.current,setState:(e,t,r)=>{var o,n,l,i;if(!Object.is(a.current[e],t)){if(a.current[e]=t,"search"===e)U(),K(),H(1,V);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById($);e?e.focus():null==(o=document.getElementById(A))||o.focus()}if(H(7,()=>{var e;a.current.selectedItemId=null==(e=W())?void 0:e.id,B.emit()}),r||H(5,G),(null==(n=s.current)?void 0:n.value)!==void 0){null==(i=(l=s.current).onValueChange)||i.call(l,null!=t?t:"");return}}B.emit()}},emit:()=>{i.current.forEach(e=>e())}}),[]),z=r.useMemo(()=>({value:(e,t,r)=>{var o;t!==(null==(o=l.current.get(e))?void 0:o.value)&&(l.current.set(e,{value:t,keywords:r}),a.current.filtered.items.set(e,L(t,r)),H(2,()=>{K(),B.emit()}))},item:(e,t)=>(o.current.add(e),t&&(n.current.has(t)?n.current.get(t).add(e):n.current.set(t,new Set([e]))),H(3,()=>{U(),K(),a.current.value||V(),B.emit()}),()=>{l.current.delete(e),o.current.delete(e),a.current.filtered.items.delete(e);let t=W();H(4,()=>{U(),(null==t?void 0:t.getAttribute("id"))===e&&V(),B.emit()})}),group:e=>(n.current.has(e)||n.current.set(e,new Set),()=>{l.current.delete(e),n.current.delete(e)}),filter:()=>s.current.shouldFilter,label:u||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:A,inputId:$,labelId:M,listInnerRef:q}),[]);function L(e,t){var r,o;let n=null!=(o=null==(r=s.current)?void 0:r.filter)?o:x;return e?n(e,a.current.search,t):0}function K(){if(!a.current.search||!1===s.current.shouldFilter)return;let e=a.current.filtered.items,t=[];a.current.filtered.groups.forEach(r=>{let a=n.current.get(r),o=0;a.forEach(t=>{o=Math.max(e.get(t),o)}),t.push([r,o])});let r=q.current;X().sort((t,r)=>{var a,o;let n=t.getAttribute("id"),l=r.getAttribute("id");return(null!=(a=e.get(l))?a:0)-(null!=(o=e.get(n))?o:0)}).forEach(e=>{let t=e.closest(m);t?t.appendChild(e.parentElement===t?e:e.closest(`${m} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${m} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=q.current)?void 0:t.querySelector(`${p}[${v}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function V(){let e=X().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(v);B.setState("value",t||void 0)}function U(){var e,t,r,i;if(!a.current.search||!1===s.current.shouldFilter){a.current.filtered.count=o.current.size;return}a.current.filtered.groups=new Set;let c=0;for(let n of o.current){let o=L(null!=(t=null==(e=l.current.get(n))?void 0:e.value)?t:"",null!=(i=null==(r=l.current.get(n))?void 0:r.keywords)?i:[]);a.current.filtered.items.set(n,o),o>0&&c++}for(let[e,t]of n.current)for(let r of t)if(a.current.filtered.items.get(r)>0){a.current.filtered.groups.add(e);break}a.current.filtered.count=c}function G(){var e,t,r;let a=W();a&&((null==(e=a.parentElement)?void 0:e.firstChild)===a&&(null==(r=null==(t=a.closest(p))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function W(){var e;return null==(e=q.current)?void 0:e.querySelector(`${f}[aria-selected="true"]`)}function X(){var e;return Array.from((null==(e=q.current)?void 0:e.querySelectorAll(g))||[])}function Z(e){let t=X()[e];t&&B.setState("value",t.getAttribute(v))}function J(e){var t;let r=W(),a=X(),o=a.findIndex(e=>e===r),n=a[o+e];null!=(t=s.current)&&t.loop&&(n=o+e<0?a[a.length-1]:o+e===a.length?a[0]:a[o+e]),n&&B.setState("value",n.getAttribute(v))}function Q(e){let t=W(),r=null==t?void 0:t.closest(p),a;for(;r&&!a;)a=null==(r=e>0?function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}(r,p):function(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}(r,p))?void 0:r.querySelector(g);a?B.setState("value",a.getAttribute(v)):J(e)}let Y=()=>Z(X().length-1),ee=e=>{e.preventDefault(),e.metaKey?Y():e.altKey?Q(1):J(1)},et=e=>{e.preventDefault(),e.metaKey?Z(0):e.altKey?Q(-1):J(-1)};return r.createElement(c.Primitive.div,{ref:t,tabIndex:-1,...N,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=N.onKeyDown)||t.call(N,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!(e.defaultPrevented||r))switch(e.key){case"n":case"j":P&&e.ctrlKey&&ee(e);break;case"ArrowDown":ee(e);break;case"p":case"k":P&&e.ctrlKey&&et(e);break;case"ArrowUp":et(e);break;case"Home":e.preventDefault(),Z(0);break;case"End":e.preventDefault(),Y();break;case"Enter":{e.preventDefault();let t=W();if(t){let e=new Event(h);t.dispatchEvent(e)}}}}},r.createElement("label",{"cmdk-label":"",htmlFor:z.inputId,id:z.labelId,style:T},u),F(e,e=>r.createElement(_.Provider,{value:B},r.createElement(b.Provider,{value:z},e))))}),k=r.forwardRef((e,t)=>{var a,o;let n=(0,d.useId)(),l=r.useRef(null),i=r.useContext(y),s=r.useContext(b),p=S(e),m=null!=(o=null==(a=p.current)?void 0:a.forceMount)?o:null==i?void 0:i.forceMount;D(()=>{if(!m)return s.item(n,null==i?void 0:i.id)},[m]);let f=M(n,l,[e.value,e.children,l],e.keywords),g=r.useContext(_),v=A(e=>e.value&&e.value===f.current),x=A(e=>!!m||!1===s.filter()||!e.search||e.filtered.items.get(n)>0);function w(){var e,t;k(),null==(t=(e=p.current).onSelect)||t.call(e,f.current)}function k(){g.setState("value",f.current,!0)}if(r.useEffect(()=>{let t=l.current;if(!(!t||e.disabled))return t.addEventListener(h,w),()=>t.removeEventListener(h,w)},[x,e.onSelect,e.disabled]),!x)return null;let{disabled:C,value:j,onSelect:R,forceMount:E,keywords:P,...N}=e;return r.createElement(c.Primitive.div,{ref:(0,u.composeRefs)(l,t),...N,id:n,"cmdk-item":"",role:"option","aria-disabled":!!C,"aria-selected":!!v,"data-disabled":!!C,"data-selected":!!v,onPointerMove:C||s.getDisablePointerSelection()?void 0:k,onClick:C?void 0:w},e.children)}),C=r.forwardRef((e,t)=>{let{heading:a,children:o,forceMount:n,...l}=e,i=(0,d.useId)(),s=r.useRef(null),p=r.useRef(null),m=(0,d.useId)(),f=r.useContext(b),g=A(e=>!!n||!1===f.filter()||!e.search||e.filtered.groups.has(i));D(()=>f.group(i),[]),M(i,s,[e.value,e.heading,p]);let h=r.useMemo(()=>({id:i,forceMount:n}),[n]);return r.createElement(c.Primitive.div,{ref:(0,u.composeRefs)(s,t),...l,"cmdk-group":"",role:"presentation",hidden:!g||void 0},a&&r.createElement("div",{ref:p,"cmdk-group-heading":"","aria-hidden":!0,id:m},a),F(e,e=>r.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?m:void 0},r.createElement(y.Provider,{value:h},e))))}),j=r.forwardRef((e,t)=>{let{alwaysRender:a,...o}=e,n=r.useRef(null),l=A(e=>!e.search);return a||l?r.createElement(c.Primitive.div,{ref:(0,u.composeRefs)(n,t),...o,"cmdk-separator":"",role:"separator"}):null}),R=r.forwardRef((e,t)=>{let{onValueChange:a,...o}=e,n=null!=e.value,l=r.useContext(_),i=A(e=>e.search),s=A(e=>e.selectedItemId),d=r.useContext(b);return r.useEffect(()=>{null!=e.value&&l.setState("search",e.value)},[e.value]),r.createElement(c.Primitive.input,{ref:t,...o,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":s,id:d.inputId,type:"text",value:n?e.value:i,onChange:e=>{n||l.setState("search",e.target.value),null==a||a(e.target.value)}})}),E=r.forwardRef((e,t)=>{let{children:a,label:o="Suggestions",...n}=e,l=r.useRef(null),i=r.useRef(null),s=A(e=>e.selectedItemId),d=r.useContext(b);return r.useEffect(()=>{if(i.current&&l.current){let e=i.current,t=l.current,r,a=new ResizeObserver(()=>{r=requestAnimationFrame(()=>{let r=e.offsetHeight;t.style.setProperty("--cmdk-list-height",r.toFixed(1)+"px")})});return a.observe(e),()=>{cancelAnimationFrame(r),a.unobserve(e)}}},[]),r.createElement(c.Primitive.div,{ref:(0,u.composeRefs)(l,t),...n,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":o,id:d.listId},F(e,e=>r.createElement("div",{ref:(0,u.composeRefs)(i,d.listInnerRef),"cmdk-list-sizer":""},e)))}),P=r.forwardRef((e,t)=>{let{open:a,onOpenChange:o,overlayClassName:n,contentClassName:l,container:i,...c}=e;return r.createElement(s.Root,{open:a,onOpenChange:o},r.createElement(s.Portal,{container:i},r.createElement(s.Overlay,{"cmdk-overlay":"",className:n}),r.createElement(s.Content,{"aria-label":e.label,"cmdk-dialog":"",className:l},r.createElement(w,{ref:t,...c}))))}),N=Object.assign(w,{List:E,Item:k,Input:R,Group:C,Separator:j,Dialog:P,Empty:r.forwardRef((e,t)=>A(e=>0===e.filtered.count)?r.createElement(c.Primitive.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Loading:r.forwardRef((e,t)=>{let{progress:a,children:o,label:n="Loading...",...l}=e;return r.createElement(c.Primitive.div,{ref:t,...l,"cmdk-loading":"",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n},F(e,e=>r.createElement("div",{"aria-hidden":!0},e)))})});function S(e){let t=r.useRef(e);return D(()=>{t.current=e}),t}var D="u"<typeof window?r.useEffect:r.useLayoutEffect;function I(e){let t=r.useRef();return void 0===t.current&&(t.current=e()),t}function A(e){let t=r.useContext(_),a=()=>e(t.snapshot());return r.useSyncExternalStore(t.subscribe,a,a)}function M(e,t,a,o=[]){let n=r.useRef(),l=r.useContext(b);return D(()=>{var r;let i=(()=>{var e;for(let t of a){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():n.current}})(),s=o.map(e=>e.trim());l.value(e,i,s),null==(r=t.current)||r.setAttribute(v,i),n.current=i}),n}var O=()=>{let[e,t]=r.useState(),a=I(()=>new Map);return D(()=>{a.current.forEach(e=>e()),a.current=new Map},[e]),(e,r)=>{a.current.set(e,r),t({})}};function F({asChild:e,children:t},a){let o;return e&&r.isValidElement(t)?r.cloneElement("function"==typeof(o=t.type)?o(t.props):"render"in o?o.render(t.props):t,{ref:t.ref},a(t.props.children)):a(t)}var T={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},$=e.i(55436),q=e.i(47163);e.i(30374);let H=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(N,{ref:a,className:(0,q.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...r}));H.displayName=N.displayName;let B=r.forwardRef(({className:e,...r},a)=>(0,t.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,t.jsx)($.Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,t.jsx)(N.Input,{ref:a,className:(0,q.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...r})]}));B.displayName=N.Input.displayName;let z=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(N.List,{ref:a,className:(0,q.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...r}));z.displayName=N.List.displayName;let L=r.forwardRef((e,r)=>(0,t.jsx)(N.Empty,{ref:r,className:"py-6 text-center text-sm",...e}));L.displayName=N.Empty.displayName;let K=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(N.Group,{ref:a,className:(0,q.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...r}));K.displayName=N.Group.displayName,r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(N.Separator,{ref:a,className:(0,q.cn)("-mx-1 h-px bg-border",e),...r})).displayName=N.Separator.displayName;let V=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(N.Item,{ref:a,className:(0,q.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r}));V.displayName=N.Item.displayName,e.s(["Command",()=>H,"CommandEmpty",()=>L,"CommandGroup",()=>K,"CommandInput",()=>B,"CommandItem",()=>V,"CommandList",()=>z],53751)},43531,e=>{"use strict";var t=e.i(78745);e.s(["Check",()=>t.default])},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},47627,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",e),...a})})}function o({className:e,...a}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",e),...a})}function n({className:e,...a}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",e),...a})}function l({className:e,...a}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...a})}function i({className:e,...a}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function s({className:e,...a}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}e.s(["Table",()=>a,"TableBody",()=>n,"TableCell",()=>s,"TableHead",()=>i,"TableHeader",()=>o,"TableRow",()=>l])},26999,e=>{"use strict";var t=e.i(71645),r=e.i(81140),a=e.i(20783),o=e.i(12129),n=e.i(10772),l=e.i(69340),i=e.i(26330),s=e.i(65491),c=e.i(74606),d=e.i(96626),u=e.i(48425),p=e.i(3536),m=e.i(85369),f=e.i(86312),g=e.i(91918),h=e.i(43476),v="Dialog",[x,b]=(0,o.createContextScope)(v),[_,y]=x(v),w=e=>{let{__scopeDialog:r,children:a,open:o,defaultOpen:i,onOpenChange:s,modal:c=!0}=e,d=t.useRef(null),u=t.useRef(null),[p,m]=(0,l.useControllableState)({prop:o,defaultProp:i??!1,onChange:s,caller:v});return(0,h.jsx)(_,{scope:r,triggerRef:d,contentRef:u,contentId:(0,n.useId)(),titleId:(0,n.useId)(),descriptionId:(0,n.useId)(),open:p,onOpenChange:m,onOpenToggle:t.useCallback(()=>m(e=>!e),[m]),modal:c,children:a})};w.displayName=v;var k="DialogTrigger",C=t.forwardRef((e,t)=>{let{__scopeDialog:o,...n}=e,l=y(k,o),i=(0,a.useComposedRefs)(t,l.triggerRef);return(0,h.jsx)(u.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":K(l.open),...n,ref:i,onClick:(0,r.composeEventHandlers)(e.onClick,l.onOpenToggle)})});C.displayName=k;var j="DialogPortal",[R,E]=x(j,{forceMount:void 0}),P=e=>{let{__scopeDialog:r,forceMount:a,children:o,container:n}=e,l=y(j,r);return(0,h.jsx)(R,{scope:r,forceMount:a,children:t.Children.map(o,e=>(0,h.jsx)(d.Presence,{present:a||l.open,children:(0,h.jsx)(c.Portal,{asChild:!0,container:n,children:e})}))})};P.displayName=j;var N="DialogOverlay",S=t.forwardRef((e,t)=>{let r=E(N,e.__scopeDialog),{forceMount:a=r.forceMount,...o}=e,n=y(N,e.__scopeDialog);return n.modal?(0,h.jsx)(d.Presence,{present:a||n.open,children:(0,h.jsx)(I,{...o,ref:t})}):null});S.displayName=N;var D=(0,g.createSlot)("DialogOverlay.RemoveScroll"),I=t.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,o=y(N,r);return(0,h.jsx)(m.RemoveScroll,{as:D,allowPinchZoom:!0,shards:[o.contentRef],children:(0,h.jsx)(u.Primitive.div,{"data-state":K(o.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),A="DialogContent",M=t.forwardRef((e,t)=>{let r=E(A,e.__scopeDialog),{forceMount:a=r.forceMount,...o}=e,n=y(A,e.__scopeDialog);return(0,h.jsx)(d.Presence,{present:a||n.open,children:n.modal?(0,h.jsx)(O,{...o,ref:t}):(0,h.jsx)(F,{...o,ref:t})})});M.displayName=A;var O=t.forwardRef((e,o)=>{let n=y(A,e.__scopeDialog),l=t.useRef(null),i=(0,a.useComposedRefs)(o,n.contentRef,l);return t.useEffect(()=>{let e=l.current;if(e)return(0,f.hideOthers)(e)},[]),(0,h.jsx)(T,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:(0,r.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,r.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),F=t.forwardRef((e,r)=>{let a=y(A,e.__scopeDialog),o=t.useRef(!1),n=t.useRef(!1);return(0,h.jsx)(T,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(o.current||a.triggerRef.current?.focus(),t.preventDefault()),o.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(o.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let r=t.target;a.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),T=t.forwardRef((e,r)=>{let{__scopeDialog:o,trapFocus:n,onOpenAutoFocus:l,onCloseAutoFocus:c,...d}=e,u=y(A,o),m=t.useRef(null),f=(0,a.useComposedRefs)(r,m);return(0,p.useFocusGuards)(),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.FocusScope,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:l,onUnmountAutoFocus:c,children:(0,h.jsx)(i.DismissableLayer,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":K(u.open),...d,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(W,{titleId:u.titleId}),(0,h.jsx)(X,{contentRef:m,descriptionId:u.descriptionId})]})]})}),$="DialogTitle",q=t.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,o=y($,r);return(0,h.jsx)(u.Primitive.h2,{id:o.titleId,...a,ref:t})});q.displayName=$;var H="DialogDescription",B=t.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,o=y(H,r);return(0,h.jsx)(u.Primitive.p,{id:o.descriptionId,...a,ref:t})});B.displayName=H;var z="DialogClose",L=t.forwardRef((e,t)=>{let{__scopeDialog:a,...o}=e,n=y(z,a);return(0,h.jsx)(u.Primitive.button,{type:"button",...o,ref:t,onClick:(0,r.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})});function K(e){return e?"open":"closed"}L.displayName=z;var V="DialogTitleWarning",[U,G]=(0,o.createContext)(V,{contentName:A,titleName:$,docsSlug:"dialog"}),W=({titleId:e})=>{let r=G(V),a=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return t.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},X=({contentRef:e,descriptionId:r})=>{let a=G("DialogDescriptionWarning"),o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return t.useEffect(()=>{let t=e.current?.getAttribute("aria-describedby");r&&t&&(document.getElementById(r)||console.warn(o))},[o,e,r]),null};e.s(["Close",()=>L,"Content",()=>M,"Description",()=>B,"Dialog",()=>w,"DialogClose",()=>L,"DialogContent",()=>M,"DialogDescription",()=>B,"DialogOverlay",()=>S,"DialogPortal",()=>P,"DialogTitle",()=>q,"DialogTrigger",()=>C,"Overlay",()=>S,"Portal",()=>P,"Root",()=>w,"Title",()=>q,"Trigger",()=>C,"WarningProvider",()=>U,"createDialogScope",()=>b])},95926,e=>{"use strict";var t=e.i(41947);e.s(["XIcon",()=>t.default])},30374,e=>{"use strict";var t=e.i(43476),r=e.i(95926),a=e.i(26999),a=a,o=e.i(47163),n=e.i(67881);function l({...e}){return(0,t.jsx)(a.Root,{"data-slot":"dialog",...e})}function i({...e}){return(0,t.jsx)(a.Trigger,{"data-slot":"dialog-trigger",...e})}function s({...e}){return(0,t.jsx)(a.Portal,{"data-slot":"dialog-portal",...e})}function c({className:e,...r}){return(0,t.jsx)(a.Overlay,{"data-slot":"dialog-overlay",className:(0,o.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function d({className:e,children:n,showCloseButton:l=!0,...i}){return(0,t.jsxs)(s,{"data-slot":"dialog-portal",children:[(0,t.jsx)(c,{}),(0,t.jsxs)(a.Content,{"data-slot":"dialog-content",className:(0,o.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",e),...i,children:[n,l&&(0,t.jsxs)(a.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(r.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,o.cn)("flex flex-col gap-2 text-center sm:text-left",e),...r})}function p({className:e,showCloseButton:r=!1,children:l,...i}){return(0,t.jsxs)("div",{"data-slot":"dialog-footer",className:(0,o.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...i,children:[l,r&&(0,t.jsx)(a.Close,{asChild:!0,children:(0,t.jsx)(n.Button,{variant:"outline",children:"Close"})})]})}function m({className:e,...r}){return(0,t.jsx)(a.Title,{"data-slot":"dialog-title",className:(0,o.cn)("text-lg leading-none font-semibold",e),...r})}function f({className:e,...r}){return(0,t.jsx)(a.Description,{"data-slot":"dialog-description",className:(0,o.cn)("text-muted-foreground text-sm",e),...r})}e.s(["Dialog",()=>l,"DialogContent",()=>d,"DialogDescription",()=>f,"DialogFooter",()=>p,"DialogHeader",()=>u,"DialogTitle",()=>m,"DialogTrigger",()=>i],30374)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},59377,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(81140),o=e.i(20783),n=e.i(12129),l=e.i(26330),i=e.i(3536),s=e.i(65491),c=e.i(10772),d=e.i(53660),u=e.i(74606),p=e.i(96626),m=e.i(48425),f=e.i(91918),g=e.i(69340),h=e.i(86312),v=e.i(85369),x="Popover",[b,_]=(0,n.createContextScope)(x,[d.createPopperScope]),y=(0,d.createPopperScope)(),[w,k]=b(x),C=e=>{let{__scopePopover:a,children:o,open:n,defaultOpen:l,onOpenChange:i,modal:s=!1}=e,u=y(a),p=r.useRef(null),[m,f]=r.useState(!1),[h,v]=(0,g.useControllableState)({prop:n,defaultProp:l??!1,onChange:i,caller:x});return(0,t.jsx)(d.Root,{...u,children:(0,t.jsx)(w,{scope:a,contentId:(0,c.useId)(),triggerRef:p,open:h,onOpenChange:v,onOpenToggle:r.useCallback(()=>v(e=>!e),[v]),hasCustomAnchor:m,onCustomAnchorAdd:r.useCallback(()=>f(!0),[]),onCustomAnchorRemove:r.useCallback(()=>f(!1),[]),modal:s,children:o})})};C.displayName=x;var j="PopoverAnchor";r.forwardRef((e,a)=>{let{__scopePopover:o,...n}=e,l=k(j,o),i=y(o),{onCustomAnchorAdd:s,onCustomAnchorRemove:c}=l;return r.useEffect(()=>(s(),()=>c()),[s,c]),(0,t.jsx)(d.Anchor,{...i,...n,ref:a})}).displayName=j;var R="PopoverTrigger",E=r.forwardRef((e,r)=>{let{__scopePopover:n,...l}=e,i=k(R,n),s=y(n),c=(0,o.useComposedRefs)(r,i.triggerRef),u=(0,t.jsx)(m.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":q(i.open),...l,ref:c,onClick:(0,a.composeEventHandlers)(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?u:(0,t.jsx)(d.Anchor,{asChild:!0,...s,children:u})});E.displayName=R;var P="PopoverPortal",[N,S]=b(P,{forceMount:void 0}),D=e=>{let{__scopePopover:r,forceMount:a,children:o,container:n}=e,l=k(P,r);return(0,t.jsx)(N,{scope:r,forceMount:a,children:(0,t.jsx)(p.Presence,{present:a||l.open,children:(0,t.jsx)(u.Portal,{asChild:!0,container:n,children:o})})})};D.displayName=P;var I="PopoverContent",A=r.forwardRef((e,r)=>{let a=S(I,e.__scopePopover),{forceMount:o=a.forceMount,...n}=e,l=k(I,e.__scopePopover);return(0,t.jsx)(p.Presence,{present:o||l.open,children:l.modal?(0,t.jsx)(O,{...n,ref:r}):(0,t.jsx)(F,{...n,ref:r})})});A.displayName=I;var M=(0,f.createSlot)("PopoverContent.RemoveScroll"),O=r.forwardRef((e,n)=>{let l=k(I,e.__scopePopover),i=r.useRef(null),s=(0,o.useComposedRefs)(n,i),c=r.useRef(!1);return r.useEffect(()=>{let e=i.current;if(e)return(0,h.hideOthers)(e)},[]),(0,t.jsx)(v.RemoveScroll,{as:M,allowPinchZoom:!0,children:(0,t.jsx)(T,{...e,ref:s,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),c.current||l.triggerRef.current?.focus()}),onPointerDownOutside:(0,a.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;c.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,a.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),F=r.forwardRef((e,a)=>{let o=k(I,e.__scopePopover),n=r.useRef(!1),l=r.useRef(!1);return(0,t.jsx)(T,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||o.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,l.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(l.current=!0));let r=t.target;o.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&l.current&&t.preventDefault()}})}),T=r.forwardRef((e,r)=>{let{__scopePopover:a,trapFocus:o,onOpenAutoFocus:n,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:g,...h}=e,v=k(I,a),x=y(a);return(0,i.useFocusGuards)(),(0,t.jsx)(s.FocusScope,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:n,onUnmountAutoFocus:c,children:(0,t.jsx)(l.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:g,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:f,onDismiss:()=>v.onOpenChange(!1),children:(0,t.jsx)(d.Content,{"data-state":q(v.open),role:"dialog",id:v.contentId,...x,...h,ref:r,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),$="PopoverClose";function q(e){return e?"open":"closed"}r.forwardRef((e,r)=>{let{__scopePopover:o,...n}=e,l=k($,o);return(0,t.jsx)(m.Primitive.button,{type:"button",...n,ref:r,onClick:(0,a.composeEventHandlers)(e.onClick,()=>l.onOpenChange(!1))})}).displayName=$,r.forwardRef((e,r)=>{let{__scopePopover:a,...o}=e,n=y(a);return(0,t.jsx)(d.Arrow,{...n,...o,ref:r})}).displayName="PopoverArrow";var H=e.i(47163);let B=r.forwardRef(({className:e,align:r="center",sideOffset:a=4,...o},n)=>(0,t.jsx)(D,{children:(0,t.jsx)(A,{ref:n,align:r,sideOffset:a,className:(0,H.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}));B.displayName=A.displayName,e.s(["Popover",()=>C,"PopoverContent",()=>B,"PopoverTrigger",()=>E],59377)},71287,17931,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(55436),o=e.i(43531),n=e.i(67881),l=e.i(23750),i=e.i(59377),s=e.i(20755);let c={getModelos:async()=>{let{data:e,error:t}=await s.supabase.from("mst_recetas_modelos").select(`
        *,
        mst_series_equivalencias (nombre_comercial)
      `).eq("activo",!0).order("id_sistema").order("nombre_comercial");if(t)throw t;return e||[]},getModeloById:async e=>{let{data:t,error:r}=await s.supabase.from("mst_recetas_modelos").select(`
        *,
        mst_series_equivalencias (nombre_comercial)
      `).eq("id_modelo",e).single();if(r)throw r;return t},createModelo:async e=>{let{data:t,error:r}=await s.supabase.from("mst_recetas_modelos").insert(e).select().single();if(r)throw r;return t},updateModelo:async(e,t)=>{let{mst_series_equivalencias:r,created_at:a,...o}=t,{data:n,error:l}=await s.supabase.from("mst_recetas_modelos").update(o).eq("id_modelo",e).select().single();if(l)throw l;return n},deleteModelo:async e=>{let{error:t}=await s.supabase.from("mst_recetas_ingenieria").delete().eq("id_modelo",e);if(t)throw t;let{error:r}=await s.supabase.from("mst_recetas_modelos").delete().eq("id_modelo",e);if(r)throw r},clonarModelo:async(e,t,r)=>{let a=await c.getModeloById(e);if(!a)throw Error("Modelo original no encontrado");let o=await c.createModelo({id_modelo:t,id_sistema:a.id_sistema,nombre_comercial:r,num_hojas:a.num_hojas,descripcion:`Copia de ${a.nombre_comercial}`,activo:!0});for(let r of(await c.getRecetasByModelo(e))){let e=`${t}-${r.id_plantilla||"X"}-${Date.now()}`;await c.createRecetaLinea({id_receta:e,id_modelo:t,id_sistema:r.id_sistema,id_plantilla:r.id_plantilla,id_material_receta:r.id_material_receta,nombre_componente:r.nombre_componente,tipo:r.tipo,cantidad_base:r.cantidad_base,angulo:r.angulo,condicion:r.condicion,formula_cantidad:r.formula_cantidad,formula_perfil:r.formula_perfil,seccion:r.seccion,orden_visual:r.orden_visual,precio_unitario_manual:r.precio_unitario_manual})}return o},getRecetasByModelo:async e=>{let{data:t,error:r}=await s.supabase.from("mst_recetas_ingenieria").select(`
        *,
        cat_plantillas (nombre_generico, id_familia)
      `).eq("id_modelo",e).order("seccion").order("orden_visual").order("nombre_componente");if(r)throw r;return t||[]},createRecetaLinea:async e=>{let{data:t,error:r}=await s.supabase.from("mst_recetas_ingenieria").insert(e).select().single();if(r)throw r;return t},updateRecetaLinea:async(e,t)=>{let{cat_plantillas:r,...a}=t,{data:o,error:n}=await s.supabase.from("mst_recetas_ingenieria").update(a).eq("id_receta",e).select().single();if(n)throw n;return o},deleteRecetaLinea:async e=>{let{error:t}=await s.supabase.from("mst_recetas_ingenieria").delete().eq("id_receta",e);if(t)throw t},getAllRecetasConCatalogInfo:async()=>{let{data:e,error:t}=await s.supabase.from("mst_recetas_ingenieria").select(`
                *,
                mst_recetas_modelos (nombre_comercial, id_sistema, num_hojas, activo),
                cat_plantillas (nombre_generico)
            `).order("id_modelo");if(t)throw t;if(!e||0===e.length)return[];let{data:r,error:a}=await s.supabase.from("cat_productos_variantes").select("id_sku, costo_mercado_unit");if(a)throw a;let o=new Map(r?.map(e=>[e.id_sku,e.costo_mercado_unit]));return e.map(e=>({...e,modelo_nombre:e.mst_recetas_modelos?.nombre_comercial,modelo_activo:e.mst_recetas_modelos?.activo,precio_catalogo:e.id_sku_catalogo?o.get(e.id_sku_catalogo):null}))},getAccesoriosConPrecio:async e=>{let{data:t,error:r}=await s.supabase.from("mst_recetas_ingenieria").select(`
        id_receta,
        nombre_componente,
        id_plantilla,
        formula_cantidad,
        precio_unitario_manual,
        cat_plantillas (nombre_generico)
      `).eq("id_modelo",e).in("tipo",["Accesorio","Servicio"]);if(r)throw r;if(!t||0===t.length)return[];let a=t.map(e=>e.id_plantilla).filter(Boolean);if(0===a.length)return t;let{data:o,error:n}=await s.supabase.from("cat_productos_variantes").select("id_sku, id_plantilla, nombre_completo, costo_mercado_unit, moneda_costo, fecha_act_precio").in("id_plantilla",a).eq("id_material","GEN");if(n)throw n;return t.map(e=>{let t=o?.find(t=>t.id_plantilla===e.id_plantilla);return{...e,sku_catalogo:t?.id_sku||null,nombre_producto:t?.nombre_completo||null,precio_catalogo:t?.costo_mercado_unit||null,moneda_precio:t?.moneda_costo||"PEN",fecha_precio:t?.fecha_act_precio||null}})},updatePrecioAccesorio:async(e,t)=>{let{error:r}=await s.supabase.from("cat_productos_variantes").update({costo_mercado_unit:t,fecha_act_precio:new Date().toISOString()}).eq("id_sku",e);if(r)throw r},getPlantillas:async()=>{let{data:e,error:t}=await s.supabase.from("cat_plantillas").select("id_plantilla, nombre_generico, id_familia").order("nombre_generico");if(t)throw t;return e||[]},getSistemas:async()=>{let{data:e,error:t}=await s.supabase.from("mst_series_equivalencias").select("id_sistema, nombre_comercial").order("nombre_comercial");if(t)throw t;return e||[]},getVariantesAccesorios:async()=>{let{data:e,error:t}=await s.supabase.from("cat_productos_variantes").select("id_sku, id_plantilla, id_material, nombre_completo, costo_mercado_unit, moneda_costo").order("id_sku");if(t)throw t;return e||[]},buscarProductosCatalogo:async(e="",t=50)=>{let r=s.supabase.from("vw_stock_realtime").select("*",{count:"exact"});e&&(r=r.or(`id_sku.ilike.%${e}%,nombre_completo.ilike.%${e}%`)),r=r.order("id_sku",{ascending:!0}).range(0,t-1);let{data:a,error:o}=await r;if(o)throw o;return a||[]},getProductoPorSku:async e=>{let{data:t,error:r}=await s.supabase.from("vw_stock_realtime").select("*").eq("id_sku",e).maybeSingle();if(r)throw r;return t},getRecetasOptions:async()=>{let{data:e,error:t}=await s.supabase.from("mst_recetas_ingenieria").select("*").not("grupo_opcion","is",null).order("orden_visual");if(t)throw t;return e||[]}};function d({value:e,onChange:s,initialSearch:d="",placeholder:u="Buscar producto..."}){let[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(d),[h,v]=(0,r.useState)(!1),[x,b]=(0,r.useState)([]),[_,y]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(e&&!_){let t=x.find(t=>t.id_sku===e);t?y(t):c.getProductoPorSku(e).then(e=>{e&&y(e)}).catch(console.error)}},[e,x]),(0,r.useEffect)(()=>{p&&0===x.length&&w(f)},[p]);let w=async e=>{v(!0);try{let t=await c.buscarProductosCatalogo(e,50);b(t)}catch(e){console.error(e),b([])}finally{v(!1)}};return(0,t.jsxs)(i.Popover,{open:p,onOpenChange:m,children:[(0,t.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{variant:"outline",role:"combobox","aria-expanded":p,className:"w-full justify-between h-8 text-xs font-normal",children:[(0,t.jsx)("span",{className:"truncate font-mono",children:e||u}),_&&(0,t.jsx)("span",{className:"ml-2 text-[10px] text-muted-foreground truncate max-w-[150px]",children:_.nombre_completo}),(0,t.jsx)(a.Search,{className:"ml-2 h-3 w-3 shrink-0 opacity-50"})]})}),(0,t.jsxs)(i.PopoverContent,{className:"w-[400px] p-0",align:"start",children:[(0,t.jsxs)("div",{className:"flex items-center border-b px-3",children:[(0,t.jsx)(a.Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,t.jsx)(l.Input,{className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-0 focus-visible:ring-0",placeholder:"Buscar SKU o nombre (Enter)...",value:f,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),w(f))}}),(0,t.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>w(f),disabled:h,children:h?"...":"Buscar"})]}),(0,t.jsxs)("div",{className:"max-h-[300px] overflow-y-auto p-1",children:[0===x.length&&!h&&(0,t.jsx)("p",{className:"p-4 text-center text-sm text-muted-foreground",children:"No se encontraron productos."}),x.map(r=>(0,t.jsxs)("div",{className:`flex items-start gap-2 p-2 rounded-sm cursor-pointer hover:bg-accent text-sm ${e===r.id_sku?"bg-accent":""}`,onClick:()=>{s(r.id_sku,r),y(r),m(!1)},children:[(0,t.jsx)(o.Check,{className:`h-4 w-4 mt-1 ${e===r.id_sku?"opacity-100":"opacity-0"}`}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:r.nombre_completo}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground flex justify-between",children:[(0,t.jsx)("span",{className:"font-mono",children:r.id_sku}),(0,t.jsxs)("span",{children:["Stock: ",r.stock_actual]})]}),(0,t.jsxs)("div",{className:"text-xs text-green-600 font-semibold mt-1",children:["Precio: ",r.moneda_reposicion," ",r.costo_mercado_unit?.toFixed(2)]})]})]},r.id_sku))]})]})]})}e.s(["recetasApi",0,c],17931),e.s(["CatalogSkuSelector",()=>d],71287)}]);